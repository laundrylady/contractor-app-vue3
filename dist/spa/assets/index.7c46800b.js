import{A as b,r as m,w as d,o as z,E as D,h as j,z as A}from"./index.7da93179.js";const y="https://www.gstatic.com/charts/loader.js";let f=null;const v=new Map;function T(){return window.google!==void 0?Promise.resolve(window.google.charts):(f===null&&(f=new Promise(e=>{const n=document.querySelector('script[src="'.concat(y,'"]')),t=n||document.createElement("script");n||(t.src=y,t.type="text/javascript",document.head.append(t)),t.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),f)}async function E(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:n=["corechart","controls"],language:t="en",mapsApiKey:o}=arguments.length>1?arguments[1]:void 0;const i=await T(),r="".concat(e,"_").concat(n.join("_"),"_").concat(t);if(v.has(r))return v.get(r);const a=new Promise(u=>{i.load(e,{packages:n,language:t,mapsApiKey:o}),i.setOnLoadCallback(()=>u(window.google))});return v.set(r,a),a}function F(e,n,t){return e!==null&&n instanceof e.visualization.DataTable||e!==null&&n instanceof e.visualization.DataView?n:e!==null&&Array.isArray(n)?e.visualization.arrayToDataTable(n,t):e!==null&&n!==null&&typeof n=="object"?new e.visualization.DataTable(n):null}function h(e,n,t,o,i,r){const a=(s,c,g)=>{if(g===void 0)throw new Error("please, provide chart type property");return new c.visualization[g](s)};if(e===null)throw new Error("please, provide charts lib property");if(t===null)throw new Error("please, provide chart element property");return n=(r||a)(t,e,o),G(e,n,i),n}function G(e,n,t){if(t!==null)for(const[o,i]of Object.entries(t))e!==null&&n!==null&&e.visualization.events.addListener(n,o,i)}function p(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,t;function o(){return n}return function(){for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];const s=this,c=function(){t=void 0,e.apply(s,a)};t!==void 0&&clearTimeout(t),t=setTimeout(c,o())}}let l=null;const P=b({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,n){let{emit:t}=n;const o=m(null),i=m(null);function r(){if(l===null||o.value===null)return;const a=F(l,e.data,e.isFirstRowLabels);if(a!==null){var u;(u=o.value)===null||u===void 0||u.draw(a,e.options)}}return d(()=>e.data,()=>r(),{deep:!0}),d(()=>e.options,()=>r(),{deep:!0}),d(()=>e.type,()=>{o.value=h(l,o.value,i.value,e.type,e.events,e.createChart),r()}),z(()=>{E(e.version,e.settings).then(a=>{a!==void 0&&(l=a,o.value=h(l,o.value,i.value,e.type,e.events,e.createChart),t("ready",o.value,a),r())}),e.resizeDebounce>0&&window.addEventListener("resize",p(r,e.resizeDebounce))}),D(()=>{o.value!==null&&typeof o.value.clearChart=="function"&&o.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",p(r,e.resizeDebounce))}),()=>j("div",{ref:i},[])}}),C=A({});function O(){C.component("GChart",P)}const S={version:"1.1.0",install:O};let w=null;typeof window!="undefined"&&(w=window.Vue);w!=null&&C.use(S);export{P as G};
