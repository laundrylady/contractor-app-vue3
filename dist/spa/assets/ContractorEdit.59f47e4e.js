import{A as L,g as R,r as C,i as F,m as b,n as x,q as a,b8 as c,l as s,L as d,Q as p,F as j,K as q,M as f,N as n,U as e,O,y as v,S as T,af as y,R as u,bp as G,ae as H}from"./index.fbd59a76.js";import{Q as B}from"./QSelect.5b5bbc87.js";import{Q as K}from"./QUploader.0da03d70.js";import{Q as g}from"./QExpansionItem.dced4e50.js";import{Q as P}from"./QList.eaa15994.js";import{u as Z,r as i,e as J}from"./index.esm.b35330f2.js";import{u as X}from"./use-quasar.1140b8ec.js";import{a as N}from"./axios.b71dd2ad.js";import{_ as Y,a as ee}from"./CountryField.82f11e93.js";import{_ as Q}from"./DateField.33bf04e7.js";import{_ as oe}from"./PostcodeRegionField.cdc91751.js";import{_ as le}from"./UserAvatar.a874c3dc.js";import{u as M}from"./debug.805a8aef.js";import{v as te,u as U,w as _,b as z}from"./help.24013814.js";import"./QItemSection.e2ef8c04.js";import"./rtl.af167dee.js";import"./format.c926bd4b.js";import"./QCircularProgress.03fa6c11.js";import"./ClosePopup.117d0adb.js";const ae={class:"text-h5"},se=a("p",null,"Certain details can be modified by the contractor in addition to the staff.",-1),re={class:"row q-col-gutter-md"},de={class:"row q-col-gutter-md q-mb-md"},ne={class:"row q-col-gutter-md"},ce={class:"row q-col-gutter-md"},ie={class:"col-xs-12 col-sm-6"},me={key:0,class:"q-mb-md"},ue={key:0,class:"text-negative"},_e={key:1,class:"text-positive"},be={class:"q-mr-sm"},pe={class:"row q-col-gutter-md q-mb-md"},ve={class:"row q-col-gutter-md"},Ve={class:"col-xs-12 col-sm-6"},fe={class:"col-xs-12 col-sm-6"},ge=a("div",{class:"text-h6 q-mt-md"},"Current Avatar",-1),he=a("p",null,"This is also visible to the customers.",-1),ye={class:"row q-col-gutter-md"},$e={class:"col-xs-12 col-sm-3 text-center"},xe={class:"col-xs-12 col-sm-9"},qe={class:"row q-col-gutter-md q-mb-md"},Ue={class:"col-xs-12 col-sm-6"},we={class:"col-xs-12 col-sm-6"},ke={class:"row q-col-gutter-md"},Ce={class:"row q-col-gutter-md"},Ne={class:"row q-col-gutter-md"},Qe={class:"row q-col-gutter-md"},Me={class:"row q-col-gutter-md"},Ae={class:"row q-col-gutter-md"},Se=a("div",{class:"text-h7"},"Initial Details",-1),Te={class:"row q-col-gutter-md q-mb-md"},Be={class:"col-xs-12 col-sm-6"},ze=a("div",{class:"text-grey text-bold"},"Why do you want to join our team?",-1),De={class:"col-xs-12 col-sm-6"},Ee=a("div",{class:"text-grey text-bold"},"Tell us about any relevant experience",-1),We={class:"row q-col-gutter-md q-mb-md"},Ie={class:"col-xs-12 col-sm-6"},Le=a("div",{class:"text-grey text-bold"},"What is your current work situation?",-1),Re={class:"col-xs-12 col-sm-6"},Fe=a("div",{class:"text-grey text-bold"},"How many hours of work per week would you like?",-1),je={class:"row q-col-gutter-md q-mb-md"},Oe={class:"col-xs-12 col-sm-6"},Ge=a("div",{class:"text-grey text-bold"},"How did you find out about us?",-1),He=a("div",{class:"text-h7"},"Appliances & Car",-1),Ke={class:"row q-col-gutter-md q-mb-md"},Pe={class:"col-xs-12 col-sm-6"},Ze=a("div",{class:"text-grey text-bold"},"What type of iron do you have?",-1),Je={class:"col-xs-12 col-sm-6"},Xe=a("div",{class:"text-grey text-bold"},"What type and size of Washer / Dryer do you have?",-1),Ye={class:"row q-col-gutter-md q-mb-md"},eo={class:"col-xs-12 col-sm-6"},oo=a("div",{class:"text-grey text-bold"},"Ironing steam station",-1),lo={class:"col-xs-12 col-sm-6"},to=a("div",{class:"text-grey text-bold"},"Washing Machine and Dryer",-1),ao={class:"row q-col-gutter-md q-mb-md"},so={class:"col-xs-12 col-sm-6"},ro=a("div",{class:"text-grey text-bold"},"What type of car do you have?",-1),no={class:"col-xs-12 col-sm-6"},co=a("div",{class:"text-grey text-bold"},"Car clothing rack",-1),io=a("div",{class:"text-h7"},"Technology",-1),mo={class:"row q-col-gutter-md"},uo={class:"col-xs-12 col-sm-6"},_o=a("div",{class:"text-grey text-bold"},"Smartphone",-1),bo={class:"col-xs-12 col-sm-6"},po=a("div",{class:"text-grey text-bold"},"Computer",-1),zo=L({__name:"ContractorEdit",props:{model:null},setup(A){const h=A,o=R(()=>h.model),$=C(!1),S=C(!1),V=C(),w=X(),D=F("bus"),m=Z({first_name:{required:i},last_name:{required:i},email:{required:i,email:J},address2:{required:i},suburb_postcode_region_id:{required:i},country_id:{required:i},dateofbirth:{required:i},mobile:{required:i},timezone:{required:i},contractor_status:{required:i},contractor_vaccinated:{required:i},contractor_car_licence:{required:i},contractor_equipment:{required:i},contractor_badge_name:{required:i},contractor_abn:{required:i},contractor_commission_rate:{required:i},contractor_target:{required:i}},o,{$scope:!1}),k=()=>{$.value=!0,N.put(`/user/${h.model.id}`,o.value).then(()=>{z("positive","Saved"),D.emit("getContractor"),$.value=!1}).catch(r=>{M(r),$.value=!1})},E=()=>{h.model.email&&N.post(`/user/checkemail/${h.model.id}`,{email:h.model.email}).then(r=>{r.data.found[0].count>0&&(o.value.email=null,z("negative","That email address is already in use!"))}).catch(r=>{M(r)})},W=r=>{o.value.avatar=r.xhr.response,k()},I=()=>{o.value.contractor_abn||(S.value=!1),w.loading.show({message:"Verifying ABN with the ATO..."}),N.post("/verifynest/verifyabn",{keyword:o.value.contractor_abn}).then(r=>{S.value=!r.data.data.Message,o.value.contractor_abn_verified=!r.data.data.Message,o.value.contractor_gst_registered=!!r.data.data.Gst,o.value.contractor_abn_verified&&k(),V.value=r.data.data,w.loading.hide()}).catch(r=>{w.loading.hide(),M(r)})};return(r,l)=>(b(),x(j,null,[a("div",ae,c(r.$t("contractor.name"))+" "+c(r.$t("contractor.details")),1),se,s(p,null,{default:d(()=>[A.model.id?(b(),q(P,{key:0},{default:d(()=>[s(g,{group:"contractor",label:r.$t("contractor.information"),"default-opened":"","header-class":"text-h6"},{default:d(()=>[s(p,{class:"q-mb-md"},{default:d(()=>[s(f,null,{default:d(()=>[a("div",re,[s(n,{modelValue:e(o).first_name,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).first_name=t),error:e(m).first_name.$invalid,label:"First Name",class:"col-xs-12 col-sm-6"},null,8,["modelValue","error"]),s(n,{modelValue:e(o).last_name,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).last_name=t),error:e(m).last_name.$invalid,label:"Last Name",class:"col-xs-12 col-sm-6"},null,8,["modelValue","error"])]),a("div",de,[s(n,{modelValue:e(o).first_name_2,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).first_name_2=t),label:"Second Contact First Name",class:"col-xs-12 col-sm-6"},null,8,["modelValue"]),s(n,{modelValue:e(o).last_name_2,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).last_name_2=t),label:"Second Contact Last Name",class:"col-xs-12 col-sm-6"},null,8,["modelValue"])]),a("div",ne,[s(n,{modelValue:e(o).email,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).email=t),modelModifiers:{trim:!0},onBlur:l[5]||(l[5]=t=>[E()]),error:e(m).email.$invalid,label:"Email",class:"col-xs-12 col-sm-6"},null,8,["modelValue","error"]),s(Q,{modelValue:e(o).dateofbirth,"onUpdate:modelValue":l[6]||(l[6]=t=>e(o).dateofbirth=t),invalid:e(m).dateofbirth.$invalid,label:r.$t("contractor.dateofbirth"),class:"col-xs-12 col-sm-6",year:19},null,8,["modelValue","invalid","label"])]),a("div",ce,[s(n,{modelValue:e(o).contractor_badge_name,"onUpdate:modelValue":l[7]||(l[7]=t=>e(o).contractor_badge_name=t),label:r.$t("contractor.badgeName"),error:e(m).contractor_badge_name.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"]),a("div",ie,[s(n,{modelValue:e(o).contractor_abn,"onUpdate:modelValue":l[9]||(l[9]=t=>e(o).contractor_abn=t),label:r.$t("contractor.abn"),error:e(m).contractor_abn.$invalid},{append:d(()=>[e(o).contractor_abn_verified?(b(),q(O,{key:0,name:"check",color:"positive"})):v("",!0),e(o).contractor_abn?(b(),q(T,{key:1,onClick:l[8]||(l[8]=t=>I()),label:"Verify",color:"primary",flat:""})):v("",!0)]),_:1},8,["modelValue","label","error"]),V.value?(b(),x("div",me,[V.value.Message?(b(),x("div",ue,c(V.value.Message),1)):v("",!0),V.value.Message?v("",!0):(b(),x("div",_e,[a("span",be,"ABN Registered to: "+c(V.value.EntityName),1)]))])):v("",!0)])]),a("div",pe,[s(n,{modelValue:e(o).mobile,"onUpdate:modelValue":l[10]||(l[10]=t=>e(o).mobile=t),label:"Mobile",mask:"#### ### ###","fill-mask":"",hint:"eg. 0412 123 343",error:e(m).mobile.$invalid,class:"col-xs-12 col-sm-3"},null,8,["modelValue","error"]),s(B,{modelValue:e(o).timezone,"onUpdate:modelValue":l[11]||(l[11]=t=>e(o).timezone=t),label:"Timezone",options:e(te)(),"map-options":"","emit-value":"",error:e(m).timezone.$invalid,class:"col-xs-12 col-sm-3"},null,8,["modelValue","options","error"]),s(B,{modelValue:e(o).contractor_status,"onUpdate:modelValue":l[12]||(l[12]=t=>e(o).contractor_status=t),options:[{label:"Active",value:"active"},{label:"Paused",value:"paused"},{label:"Archived",value:"archived"}],label:r.$t("contractor.status"),class:"col-xs-12 col-sm-3",error:e(m).contractor_status.$invalid,"emit-value":"","map-options":""},null,8,["modelValue","label","error"]),s(Q,{modelValue:e(o).contractor_start_date,"onUpdate:modelValue":l[13]||(l[13]=t=>e(o).contractor_start_date=t),label:r.$t("contractor.startDate"),class:"col-xs-12 col-sm-3",year:19},null,8,["modelValue","label"])]),s(n,{modelValue:e(o).contractor_description,"onUpdate:modelValue":l[14]||(l[14]=t=>e(o).contractor_description=t),label:r.$t("contractor.description"),class:"q-mb-md"},null,8,["modelValue","label"]),a("div",ve,[a("div",Ve,[a("div",null,[s(y,{modelValue:e(o).contractor_vaccinated,"onUpdate:modelValue":l[15]||(l[15]=t=>e(o).contractor_vaccinated=t),label:r.$t("contractor.vaccinated")},null,8,["modelValue","label"])]),a("div",null,[s(y,{modelValue:e(o).contractor_equipment,"onUpdate:modelValue":l[16]||(l[16]=t=>e(o).contractor_equipment=t),label:r.$t("contractor.equipment")},null,8,["modelValue","label"])])]),a("div",fe,[a("div",null,[s(y,{modelValue:e(o).contractor_car_licence,"onUpdate:modelValue":l[17]||(l[17]=t=>e(o).contractor_car_licence=t),label:r.$t("contractor.carLicence")},null,8,["modelValue","label"])]),a("div",null,[s(y,{modelValue:e(o).enabled,"onUpdate:modelValue":l[18]||(l[18]=t=>e(o).enabled=t),label:r.$t("contractor.enabled")},null,8,["modelValue","label"])])])]),ge,he,a("div",ye,[a("div",$e,[s(le,{user:e(o),size:"92px"},null,8,["user"])]),a("div",xe,[$.value?v("",!0):(b(),q(K,{key:0,color:"grey-7",url:e(U).url,headers:e(U).headers,onUploaded:W,label:"Upload image","auto-expand":"","auto-upload":"",accept:e(U).images,"field-name":e(U).fieldName,ref:"avatarUploader"},null,8,["url","headers","accept","field-name"]))])])]),_:1})]),_:1})]),_:1},8,["label"]),s(g,{group:"contractor",label:r.$t("contractor.financials"),"header-class":"text-h6"},{default:d(()=>[s(p,null,{default:d(()=>[s(f,null,{default:d(()=>[a("div",qe,[a("div",Ue,[s(y,{modelValue:e(o).contractor_gst_registered,"onUpdate:modelValue":l[19]||(l[19]=t=>e(o).contractor_gst_registered=t),label:"GST Registered?"},null,8,["modelValue"])]),a("div",we,[s(Q,{modelValue:e(o).contractor_insurance_expiry,"onUpdate:modelValue":l[20]||(l[20]=t=>e(o).contractor_insurance_expiry=t),label:r.$t("contractor.insuranceExpiry")},null,8,["modelValue","label"])])]),a("div",ke,[s(n,{modelValue:e(o).contractor_commission_rate,"onUpdate:modelValue":l[21]||(l[21]=t=>e(o).contractor_commission_rate=t),error:e(m).contractor_commission_rate.$invalid,type:"number",label:r.$t("contractor.commissionRate"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","error","label"]),s(n,{modelValue:e(o).contractor_target,"onUpdate:modelValue":l[22]||(l[22]=t=>e(o).contractor_target=t),label:r.$t("contractor.target"),error:e(m).contractor_target.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"])])]),_:1})]),_:1})]),_:1},8,["label"]),s(g,{group:"contractor",label:r.$t("contractor.addressDetails"),"header-class":"text-h6"},{default:d(()=>[s(p,null,{default:d(()=>[s(f,null,{default:d(()=>[s(Y,{model:e(o),filled:!0,addressfields:{address1:"address1",address2:"address2",suburb_postcode_region_id:"suburb_postcode_region_id",lat:"lat",lng:"lng",country_id:"country_id"},placeholder:r.$t("address.search")},null,8,["model","placeholder"]),s(n,{modelValue:e(o).address1,"onUpdate:modelValue":l[23]||(l[23]=t=>e(o).address1=t),label:r.$t("address.line1"),"bottom-slots":""},null,8,["modelValue","label"]),s(n,{modelValue:e(o).address2,"onUpdate:modelValue":l[24]||(l[24]=t=>e(o).address2=t),error:e(m).address2.$invalid,label:r.$t("address.line2")},null,8,["modelValue","error","label"]),a("div",Ce,[s(oe,{modelValue:e(o).suburb_postcode_region_id,"onUpdate:modelValue":l[25]||(l[25]=t=>e(o).suburb_postcode_region_id=t),invalid:e(m).suburb_postcode_region_id.$invalid,label:r.$t("address.suburb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","invalid","label"]),s(ee,{modelValue:e(o).country_id,"onUpdate:modelValue":l[26]||(l[26]=t=>e(o).country_id=t),label:r.$t("address.country"),invalid:e(m).country_id.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","invalid"])])]),_:1})]),_:1})]),_:1},8,["label"]),s(g,{group:"contractor",label:r.$t("contractor.bd.label"),"header-class":"text-h6"},{default:d(()=>[s(p,null,{default:d(()=>[s(f,null,{default:d(()=>[a("div",Ne,[s(n,{modelValue:e(o).contractor_bd_name,"onUpdate:modelValue":l[27]||(l[27]=t=>e(o).contractor_bd_name=t),label:r.$t("contractor.bd.name"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(n,{modelValue:e(o).contractor_bd_bank,"onUpdate:modelValue":l[28]||(l[28]=t=>e(o).contractor_bd_bank=t),label:r.$t("contractor.bd.bank"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])]),a("div",Qe,[s(n,{modelValue:e(o).contractor_bd_bsb,"onUpdate:modelValue":l[29]||(l[29]=t=>e(o).contractor_bd_bsb=t),label:r.$t("contractor.bd.bsb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(n,{modelValue:e(o).contractor_bd_number,"onUpdate:modelValue":l[30]||(l[30]=t=>e(o).contractor_bd_number=t),label:r.$t("contractor.bd.number"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1},8,["label"]),s(g,{group:"contractor",label:r.$t("contractor.ec.label"),"header-class":"text-h6"},{default:d(()=>[s(p,null,{default:d(()=>[s(f,null,{default:d(()=>[a("div",Me,[s(n,{modelValue:e(o).contractor_ec_first_name,"onUpdate:modelValue":l[31]||(l[31]=t=>e(o).contractor_ec_first_name=t),label:r.$t("contractor.ec.firstName"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(n,{modelValue:e(o).contractor_ec_last_name,"onUpdate:modelValue":l[32]||(l[32]=t=>e(o).contractor_ec_last_name=t),label:r.$t("contractor.ec.lastName"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])]),a("div",Ae,[s(n,{modelValue:e(o).contractor_ec_phone,"onUpdate:modelValue":l[33]||(l[33]=t=>e(o).contractor_ec_phone=t),label:r.$t("contractor.ec.phone"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(n,{modelValue:e(o).contractor_ec_relationship,"onUpdate:modelValue":l[34]||(l[34]=t=>e(o).contractor_ec_relationship=t),label:r.$t("contractor.ec.relationship"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1},8,["label"]),s(g,{group:"contractor",label:r.$t("contractor.application.label"),"header-class":"text-h6"},{default:d(()=>[s(p,null,{default:d(()=>[s(f,null,{default:d(()=>[Se,a("div",Te,[a("div",Be,[ze,u(" "+c(e(_)(e(o).contractor_why_join)),1)]),a("div",De,[Ee,u(" "+c(e(_)(e(o).contractor_relevant_experience)),1)])]),a("div",We,[a("div",Ie,[Le,u(" "+c(e(_)(e(o).contractor_current_work_situation)),1)]),a("div",Re,[Fe,u(" "+c(e(_)(e(o).contractor_hours_per_week)),1)])]),a("div",je,[a("div",Oe,[Ge,u(" "+c(e(_)(e(o).contractor_referral_type)),1)])]),He,a("div",Ke,[a("div",Pe,[Ze,u(" "+c(e(_)(e(o).contractor_iron_type)),1)]),a("div",Je,[Xe,u(" "+c(e(_)(e(o).contractor_washing_machine_type)),1)])]),a("div",Ye,[a("div",eo,[oo,u(" "+c(e(_)(e(o).contractor_ironing_steam_station)),1)]),a("div",lo,[to,u(" "+c(e(_)(e(o).contractor_washing_machine_dryer)),1)])]),a("div",ao,[a("div",so,[ro,u(" "+c(e(_)(e(o).contractor_car_type)),1)]),a("div",no,[co,u(" "+c(e(_)(e(o).contractor_clothing_rack)),1)])]),io,a("div",mo,[a("div",uo,[_o,u(" "+c(e(_)(e(o).contractor_smartphone_type)),1)]),a("div",bo,[po,u(" "+c(e(_)(e(o).contractor_computer_type)),1)])])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):v("",!0),s(G,{class:"q-mt-md"}),s(H,{class:"bg-grey-1",align:"right"},{default:d(()=>[s(T,{onClick:l[35]||(l[35]=t=>k()),label:r.$t("actions.save"),color:"primary",disabled:e(m).$invalid},null,8,["label","disabled"])]),_:1})]),_:1})],64))}});export{zo as default};
