import{A as E,r as N,m as s,n as b,l as e,L as a,R as i,ag as Q,S as x,ad as I,i as A,B as M,o as P,E as H,w as R,J as B,K as f,y as r,q as n,O as k,ai as c,U as D,t as z,F as V,b1 as S}from"./index.7da93179.js";import{a as j,Q as $}from"./QBreadcrumbs.96094532.js";import{Q as J}from"./QBadge.d2d220ed.js";import{Q as K}from"./QHeader.9f36f572.js";import{Q as m,a as t}from"./QItem.642560fa.js";import{Q as y}from"./QList.709f4980.js";import{Q as T}from"./rtl.ba9e3bff.js";import{Q as O}from"./QDrawer.fb035424.js";import{Q as Y}from"./QPage.e25f8b02.js";import{Q as G,a as W}from"./QLayout.bec178d3.js";import{_ as X}from"./ndis_heart.0820b9e2.js";import{a as Z}from"./axios.07c7c7d9.js";import{Q as v,_ as ee}from"./QRouteTab.ed514f02.js";import{_ as ae}from"./PostcodeRegionDisplay.128d2d33.js";import{_ as w}from"./UserAvatar.41db8b9e.js";import{u as le}from"./debug.9f3fb657.js";import{l as C}from"./help.4068c5a1.js";import{Q as te}from"./QMenu.00781621.js";import{Q as oe}from"./QTabs.33e82f7a.js";import"./QResizeObserver.66f1c4a6.js";import"./TouchPan.cb35dc49.js";import"./format.3e32b8d9.js";const se=E({__name:"TeamNav",props:{model:null},setup(d){const p=N("dashboard");return(g,_)=>(s(),b("div",null,[e(x,{color:"black",outline:"",icon:"menu",class:"lt-sm"},{default:a(()=>[e(te,{"auto-close":""},{default:a(()=>[e(y,{style:{"min-width":"100px"}},{default:a(()=>[e(m,{clickable:"",to:{name:"team-edit",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("Details")]),_:1})]),_:1},8,["to"]),e(m,{clickable:"",to:{name:"team-users",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("Users")]),_:1})]),_:1},8,["to"]),e(Q),e(m,{clickable:"",to:{name:"team-documents",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("Documents")]),_:1})]),_:1},8,["to"]),e(Q),e(m,{clickable:"",to:{name:"team-sms",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("SMS Notifications")]),_:1})]),_:1},8,["to"]),e(m,{clickable:"",to:{name:"team-notifications",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("Email Notifications")]),_:1})]),_:1},8,["to"]),e(Q),e(m,{clickable:"",to:{name:"team-audit",params:{id:d.model.id}}},{default:a(()=>[e(t,null,{default:a(()=>[i("Audit")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1}),e(oe,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=l=>p.value=l),align:"left","active-bg-color":"primary","active-color":"white"},{default:a(()=>[e(v,{to:{name:"team-dashboard",params:{id:d.model.id}},label:"Dashboard",icon:"dashboard"},null,8,["to"]),e(v,{to:{name:"team-edit",params:{id:d.model.id}},label:"Details",icon:"info"},null,8,["to"]),e(v,{to:{name:"team-orders",params:{id:d.model.id}},label:g.$t("order.namePlural"),icon:"event"},null,8,["to","label"]),e(v,{to:{name:"team-users",params:{id:d.model.id}},label:g.$t("team.userPlural"),icon:"account_circle"},null,8,["to","label"]),e(v,{to:{name:"team-documents",params:{id:d.model.id}},label:"Documents",icon:"attach_file"},null,8,["to"]),e(v,{to:{name:"team-sms",params:{id:d.model.id}},label:"SMS",icon:"chat"},null,8,["to"]),e(v,{to:{name:"team-notifications",params:{id:d.model.id}},label:"Emails",icon:"mail"},null,8,["to"]),e(v,{to:{name:"team-audit",params:{id:d.model.id}},label:"Audit",icon:"bolt"},null,8,["to"])]),_:1},8,["modelValue"])]))}}),ne={class:"q-pl-md q-pr-md q-pt-md"},de={class:"flex"},ie={class:"q-mb-lg"},ue={class:"row items-center q-mb-lg"},re={class:"col-xs-12 col-sm-9"},me={class:"flex items-center"},ce={class:"text-h4"},fe={class:"q-mr-sm"},_e={key:0,class:"col-xs-2 col-sm-3 text-right"},ve=n("br",null,null,-1),be={key:0,class:"text-right q-pa-sm"},pe=["href"],he=["href"],ge=n("img",{src:X,style:{height:"32px"}},null,-1),ke={key:2},Qe={class:"text-grey"},ye={key:3},qe={key:0},$e={class:"text-grey"},Ke=E({__name:"TeamHome",setup(d){const p=I(),g=A("bus"),_=M({left:!0,right:!0}),l=N(),q=async()=>{Z.get(`/team/${p.params.id}?feed=true`).then(u=>{l.value=u.data,document.title=u.data.name}).catch(u=>{le(u)})};return P(async()=>{await q(),g.on("getTeam",()=>{q()})}),H(()=>{g.off("getTeam")}),R(()=>p.params.id,u=>{p.name==="team-dashboard"&&u&&q()}),(u,h)=>{const U=B("router-link"),L=B("router-view");return l.value&&l.value.id?(s(),f(G,{key:0,view:"lHh Lpr lFf",container:"",class:"layout-height"},{default:a(()=>[e(K,{class:z({"text-black page-title":!u.$q.dark.isActive,"bg-dark":u.$q.dark.isActive}),bordered:""},{default:a(()=>[n("div",ne,[n("div",de,[e(j,{class:"q-mb-md"},{separator:a(()=>[e(k,{size:"1.5em",name:"chevron_right"})]),default:a(()=>[e($,{label:"Home",icon:"home",to:{name:"appDashboard"}}),e($,{label:u.$t("team.namePlural"),to:{name:"teams"}},null,8,["label"]),e($,{label:l.value.name},null,8,["label"])]),_:1})]),n("div",ie,[n("div",ue,[n("div",re,[n("div",me,[n("div",ce,[u.$q.screen.lt.lg?(s(),f(x,{key:0,onClick:h[0]||(h[0]=o=>_.left=!_.left),icon:"menu",color:"primary",outline:"",class:"q-mr-md"})):r("",!0),n("span",fe,"#"+c(l.value.id),1),i(" "+c(l.value.name)+" ",1),l.value.status==="blocked"?(s(),f(J,{key:1,label:"Blocked",color:"negative"})):r("",!0)])])]),u.$q.screen.xs?r("",!0):(s(),b("div",_e,[n("div",null,[i(" Last data update"),ve,n("strong",null,c(D(C)(l.value.updated_at)),1)])]))]),e(se,{model:l.value},null,8,["model"])])])]),_:1},8,["class"]),e(O,{modelValue:_.left,"onUpdate:modelValue":h[2]||(h[2]=o=>_.left=o),width:300,side:"left",bordered:""},{default:a(()=>[u.$q.screen.xs?(s(),b("div",be,[e(x,{onClick:h[1]||(h[1]=o=>_.left=!1),icon:"close",flat:"",round:"",dense:""})])):r("",!0),l.value.lat&&l.value.lng?(s(),f(ee,{key:1,"lat-lng":{lat:parseFloat(l.value.lat),lng:parseFloat(l.value.lng)}},null,8,["lat-lng"])):r("",!0),e(y,{dense:"",class:"q-mt-md"},{default:a(()=>[e(m,null,{default:a(()=>[e(t,{side:""},{default:a(()=>[e(k,{name:"account_circle"})]),_:1}),e(t,null,{default:a(()=>[i(c(l.value.name),1)]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(t,{side:""},{default:a(()=>[e(k,{name:"mail"})]),_:1}),e(t,null,{default:a(()=>[n("a",{href:`mailto:${l.value.email}`,class:"link"},c(l.value.email),9,pe)]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(t,{side:""},{default:a(()=>[e(k,{name:"phone"})]),_:1}),e(t,null,{default:a(()=>[n("a",{href:`tel:${l.value.mobile}`,class:"link"},c(l.value.mobile),9,he)]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(t,{side:""},{default:a(()=>[e(k,{name:"place"})]),_:1}),e(t,null,{default:a(()=>[l.value.suburbpostcoderegion?(s(),f(ae,{key:0,postcoderegions:[l.value.suburbpostcoderegion]},null,8,["postcoderegions"])):r("",!0)]),_:1})]),_:1}),l.value.type==="NDIS"?(s(),f(m,{key:0},{default:a(()=>[e(t,{side:""},{default:a(()=>[ge]),_:1}),e(t,null,{default:a(()=>[i(c(l.value.ndis_number),1)]),_:1})]),_:1})):r("",!0)]),_:1}),e(Q,{class:"q-mt-sm q-mb-sm"}),l.value.contractors&&l.value.contractors.length?(s(),b("div",ke,[e(y,null,{default:a(()=>[e(T,{header:""},{default:a(()=>[i("SERVICED BY")]),_:1}),(s(!0),b(V,null,S(l.value.contractors,o=>(s(),f(m,{key:o.id},{default:a(()=>[e(t,{avatar:""},{default:a(()=>[e(w,{user:o},null,8,["user"])]),_:2},1024),e(t,null,{default:a(()=>[e(U,{to:{name:"contractor-dashboard",params:{id:o.id}},target:"_blank",class:"link"},{default:a(()=>[i(c(o.fullname),1)]),_:2},1032,["to"]),n("div",Qe,c(o.email),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):r("",!0),l.value.feed?(s(),b("div",ye,[l.value.feed.length?(s(),b("div",qe,[e(y,null,{default:a(()=>[e(T,{header:""},{default:a(()=>[i(" FEED")]),_:1}),(s(!0),b(V,null,S(l.value.feed,(o,F)=>(s(),f(m,{key:F},{default:a(()=>[e(t,{avatar:""},{default:a(()=>[o.user&&!o.sendingUser?(s(),f(w,{key:0,user:o.user},null,8,["user"])):r("",!0),o.sendingUser&&!o.user?(s(),f(w,{key:1,user:o.sendingUser},null,8,["user"])):r("",!0)]),_:2},1024),e(t,null,{default:a(()=>[n("div",$e,c(D(C)(o.created_at)),1),i(" "+c(o.activity),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):r("",!0)])):r("",!0)]),_:1},8,["modelValue"]),e(W,null,{default:a(()=>[e(Y,{padding:""},{default:a(()=>[e(L,{model:l.value},null,8,["model"])]),_:1})]),_:1})]),_:1})):r("",!0)}}});export{Ke as default};
