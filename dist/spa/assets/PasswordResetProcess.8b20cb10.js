import{A as T,r as f,B as C,ad as $,J as P,m as i,K as u,L as a,l as e,Q as N,M as w,H as g,O as v,S as k,y as p,R as Q,n as S,N as x,U as h,ae as A,q as b}from"./index.fbd59a76.js";import{Q as V}from"./QBanner.98396177.js";import{Q as E}from"./QSpace.8da48267.js";import{Q as R}from"./QPage.c929a5d1.js";import{Q as L,a as O}from"./QLayout.8099c30b.js";import{u as U}from"./debug.805a8aef.js";import{u as H,r as _}from"./index.esm.b35330f2.js";import{a as M}from"./axios.b71dd2ad.js";import{_ as Y}from"./AppLogo.f892f38f.js";import"./QResizeObserver.6ff9e290.js";const Z=b("h1",{class:"text-h3 q-mt-none q-mb-none"},"Password Reset",-1),j=b("p",null,"Your password has been updated!",-1),z={key:0},D=b("p",null,"Enter and confirm your new password below:",-1),ne=T({__name:"PasswordResetProcess",setup(F){const d=f(!1),m=f(!1),n=f(!1),r=C({pwc:!0,pw:!0}),I=$(),s=C({code:I.params.code,password:void 0,passwordConfirm:void 0}),y=H({code:{required:_},password:{required:_},passwordConfirm:{required:_}},s),B=()=>{const l=s.password?s.password:void 0,o=[/[0-9]/,/[a-z]/,/[A-Z]/,/[^A-Z-0-9]/i];if(l===void 0)return-1;let c=0;if(l.length<6)return 0;for(const t in o)o[t].test(l)&&(c+=1);return c},q=()=>{d.value=!0,M.post("/auth/password/reset/process",s).then(()=>{m.value=!1,n.value=!0,d.value=!1}).catch(l=>{U(l),m.value=!0,n.value=!1,d.value=!1})};return(l,o)=>{const c=P("router-link");return i(),u(L,{view:"lHh Lpr lFf"},{default:a(()=>[e(O,null,{default:a(()=>[e(R,{class:"row justify-center items-center animated fadeIn q-pa-md"},{default:a(()=>[e(N,{class:"col-xs-12 col-sm-6 col-md-4 text-center"},{default:a(()=>[e(w,{class:"row",style:{"min-height":"92px"}},{default:a(()=>[e(Y)]),_:1}),e(w,null,{default:a(()=>[Z]),_:1}),e(w,null,{default:a(()=>[e(g,{"enter-active-class":"animated bounceIn","leave-active-class":"animated bounceOutTop",appear:""},{default:a(()=>[n.value?(i(),u(V,{key:0,class:"text-positive q-mb-md"},{avatar:a(()=>[e(v,{name:"check",color:"white"})]),default:a(()=>[j,e(k,{to:{name:"signIn"},color:"secondary",label:"Go To Sign In",class:"full-width"})]),_:1})):p("",!0)]),_:1}),e(g,{"enter-active-class":"animated bounceIn","leave-active-class":"animated bounceOutTop",appear:""},{default:a(()=>[m.value?(i(),u(V,{key:0,class:"bg-negative text-white"},{default:a(()=>[Q("Error reseting your password")]),_:1})):p("",!0)]),_:1}),n.value?p("",!0):(i(),S("div",z,[D,e(x,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=t=>s.password=t),label:"Please enter a strong password",type:r.pw?"password":"text",error:h(y).password.$error||s.password&&B()<4,"bottom-slots":"","error-message":"Your password must contain at least 1 number, 1 uppercase character and 1 special character","aria-label":"Enter new password"},{append:a(()=>[e(v,{name:r.pw?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[0]||(o[0]=t=>r.pw=!r.pw)},null,8,["name"])]),_:1},8,["modelValue","type","error"]),e(x,{modelValue:s.passwordConfirm,"onUpdate:modelValue":o[3]||(o[3]=t=>s.passwordConfirm=t),label:"Confirm password",type:r.pwc?"password":"text",error:s.password&&s.passwordConfirm!==s.password,class:"q-mt-md","aria-label":"Confirm new password"},{append:a(()=>[e(v,{name:r.pwc?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[2]||(o[2]=t=>r.pwc=!r.pwc)},null,8,["name"])]),_:1},8,["modelValue","type","error"])]))]),_:1}),n.value?p("",!0):(i(),u(A,{key:0,class:"row"},{default:a(()=>[e(c,{to:{name:"signIn"},class:"link"},{default:a(()=>[Q("Back to Sign In")]),_:1}),e(E),n.value?p("",!0):(i(),u(k,{key:0,onClick:o[4]||(o[4]=t=>q()),disabled:d.value||h(y).$invalid||s.password&&s.passwordConfirm!==s.password,loading:d.value,color:"secondary",label:"Confirm","aria-label":"Confirm"},null,8,["disabled","loading"]))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ne as default};
