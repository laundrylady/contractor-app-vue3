import{V as C,E as S,h as L,H as E,A as V,r as y,m as A,K as k,L as p,l as h,O as g,u as F,bg as H,R as q,b8 as N,o as O,w as P}from"./index.e647c85a.js";import{a as U,Q as x}from"./QItemSection.99659658.js";import{Q as Y}from"./rtl.4f5e13e8.js";import{Q as w}from"./QSelect.853d535e.js";import{a as v}from"./axios.ccd3a804.js";import{u as _}from"./debug.805a8aef.js";var G=C({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:t}){let n=!1,u,d,f=null,l=null,r,i;function s(){u&&u(),u=null,n=!1,f!==null&&(clearTimeout(f),f=null),l!==null&&(clearTimeout(l),l=null),d!==void 0&&d.removeEventListener("transitionend",r),r=null}function B(a,c,m){c!==void 0&&(a.style.height=`${c}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,u=m}function $(a,c){a.style.overflowY=null,a.style.height=null,a.style.transition=null,s(),c!==i&&t(c)}function Q(a,c){let m=0;d=a,n===!0?(s(),m=a.offsetHeight===a.scrollHeight?0:void 0):(i="hide",a.style.overflowY="hidden"),B(a,m,c),f=setTimeout(()=>{f=null,a.style.height=`${a.scrollHeight}px`,r=b=>{l=null,(Object(b)!==b||b.target===a)&&$(a,"show")},a.addEventListener("transitionend",r),l=setTimeout(r,e.duration*1.1)},100)}function T(a,c){let m;d=a,n===!0?s():(i="show",a.style.overflowY="hidden",m=a.scrollHeight),B(a,m,c),f=setTimeout(()=>{f=null,a.style.height=0,r=b=>{l=null,(Object(b)!==b||b.target===a)&&$(a,"hide")},a.addEventListener("transitionend",r),l=setTimeout(r,e.duration*1.1)},100)}return S(()=>{n===!0&&s()}),()=>L(E,{css:!1,appear:e.appear,onEnter:Q,onLeave:T},o.default)}});const j=(e,o,t,n,u,d,f,l)=>{!o||(e.flat_number&&e.flat_number!==""?(e.flat_type&&(o[t]=e.flat_type),o[t]=o[t]?`${o[t]} ${e.flat_number_prefix||""}${e.flat_number}${e.flat_number_suffix||""}`:`${e.flat_number_prefix||""}${e.flat_number}${e.flat_number_suffix||""}`):o[t]="",e.number_first&&e.number_first!==""?(o[n]=`${e.number_first_prefix||""}${e.number_first}${e.number_first_suffix||""}`,e.number_last&&(o[n]+=`-${e.number_last_prefix||""}${e.number_last}${e.number_last_suffix||""}`)):o[n]="",e.street_name&&e.street_name!==""&&(o[n]+=" "+e.street_name),e.street_type_code&&e.street_type_code!==""&&(o[n]+=" "+e.street_type_code),d&&(o[d]=e.latitude),d&&(o[f]=e.longitude),u&&(o[u]=e.suburb_postcode_region_id),l&&(o[l]=e.country_id))},J=V({__name:"AddressSearch",props:{model:null,addressfields:null,invalid:{type:Boolean},dark:{type:Boolean},outlined:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},dense:{type:Boolean},borderless:{type:Boolean},filled:{type:Boolean},placeholder:null},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,n=y(),u=y(!1),d=y(),f=()=>{j(n.value,t.model,t.addressfields.address1,t.addressfields.address2,t.addressfields.suburb_postcode_region_id,t.addressfields.lat,t.addressfields.lng,t.addressfields.country_id),n.value=null,o("update:modelValue",null)},l=(r,i)=>{r.length>3&&(u.value=!0,d.value=[{unit_number:"Searching addresses..."}],v.post("/address",{address:r}).then(s=>{i(()=>{d.value=s.data.data,u.value=!1})}).catch(s=>(_(s),u.value=!1,[])))};return(r,i)=>(A(),k(w,{modelValue:n.value,"onUpdate:modelValue":[i[0]||(i[0]=s=>n.value=s),f],options:d.value,"use-input":"",placeholder:e.placeholder,onFilter:l,"hide-dropdown-icon":"","input-debounce":"200",autocomplete:"search-filter",class:"q-mb-sm",outlined:"",filled:e.filled,dense:"",loading:u.value},{prepend:p(()=>[h(g,{name:"search"})]),loading:p(()=>[]),option:p(s=>[h(U,F(H(s.itemProps)),{default:p(()=>[h(x,{avatar:""},{default:p(()=>[h(g,{name:"place"})]),_:1}),h(x,null,{default:p(()=>[h(Y,null,{default:p(()=>[q(N(s.opt.formatted),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","placeholder","filled","loading"]))}}),W=V({__name:"CountryField",props:{modelValue:null,invalid:{type:Boolean},label:null,dark:{type:Boolean},outlined:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},dense:{type:Boolean},borderless:{type:Boolean},filled:{type:Boolean},placeholder:null,nowatch:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,n=y(!1),u=y(),d=l=>{o("update:modelValue",l)},f=(l,r)=>{l.length<2||(n.value=!0,v.get(`/public/country/index?keyword=${l}`).then(i=>{r(()=>{u.value=i.data.map(s=>({value:s.id,label:s.name})),n.value=!1})}).catch(i=>{n.value=!1,_(i)}))};return O(()=>{t.modelValue&&(Array.isArray(t.modelValue)&&t.modelValue.length||!Array.isArray(t.modelValue))&&v.get(`/public/country/${t.modelValue}`).then(l=>{Array.isArray(l.data)?(u.value=l.data.map(r=>({value:r.id,label:r.name})),n.value=!1):(u.value=[{value:l.data.id,label:l.data.name}],n.value=!1)})}),P(()=>t.modelValue,(l,r)=>{!t.nowatch&&l&&l!==r&&(Array.isArray(l)&&l.length||!Array.isArray(l))&&v.get(`/public/country/${l}`).then(i=>{u.value=[{value:i.data.id,label:i.data.name}]}).catch(i=>{_(i)})}),(l,r)=>(A(),k(w,{label:e.label,"model-value":e.modelValue,"onUpdate:modelValue":d,options:u.value,onFilter:f,"use-input":"","emit-value":"","map-options":"",dark:e.dark,color:e.dark?"white":"",error:e.invalid,"hide-dropdown-icon":"","input-debounce":"350",autocomplete:"country-filter",outlined:e.outlined,disable:e.disabled,ref:"qSelectCountry",borderless:e.borderless,dense:e.dense,class:"q-pb-none",filled:e.filled,loading:n.value,multiple:e.multiple,placeholder:e.placeholder},{prepend:p(()=>[h(g,{name:"language",color:"info"})]),_:1},8,["label","model-value","options","dark","color","error","outlined","disable","borderless","dense","filled","loading","multiple","placeholder"]))}});export{G as Q,J as _,W as a};
