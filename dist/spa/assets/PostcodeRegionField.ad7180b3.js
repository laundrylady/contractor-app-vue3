import{A as h,r,o as v,w as g,m as c,K as m,L as p,l as $,O as A,af as B,y as k}from"./index.7da93179.js";import{Q as V}from"./QSelect.0342b451.js";import{a as u}from"./axios.07c7c7d9.js";import{u as f}from"./debug.9f3fb657.js";const L=h({__name:"PostcodeRegionField",props:{modelValue:null,invalid:{type:Boolean},label:null,dark:{type:Boolean},outlined:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},dense:{type:Boolean},borderless:{type:Boolean},filled:{type:Boolean},placeholder:null,nowatch:{type:Boolean},state:null},emits:["update:modelValue","selectedLocation"],setup(l,{emit:s}){const o=l,d=r(!1),n=r(),y=e=>{s("update:modelValue",e);const a=n.value?n.value.find(t=>t.value===e):null;s("selectedLocation",a?a.label:null)},b=(e,a)=>{e.length<2||(d.value=!0,u.get(`/public/postcoderegion/index?keyword=${e}${o.state?`&state=${o.state}`:""}`).then(t=>{a(()=>{n.value=t.data.map(i=>({value:i.id,label:`${i.locality} (${i.state} ${i.postcode})`})),d.value=!1})}).catch(t=>{d.value=!1,f(t)}))};return v(()=>{o.modelValue&&(Array.isArray(o.modelValue)&&o.modelValue.length||!Array.isArray(o.modelValue))&&u.get(`/public/postcoderegion/${o.modelValue}`).then(e=>{Array.isArray(e.data)?(n.value=e.data.map(a=>({value:a.id,label:`${a.locality} (${a.state} ${a.postcode})`})),d.value=!1):(n.value=[{value:e.data.id,label:`${e.data.locality} (${e.data.state} ${e.data.postcode})`}],d.value=!1)})}),g(()=>o.modelValue,(e,a)=>{!o.nowatch&&e&&e!==a&&(Array.isArray(e)&&e.length||!Array.isArray(e))&&u.get(`/public/postcoderegion/${e}`).then(t=>{n.value=[{value:t.data.id,label:`${t.data.locality} (${t.data.state} ${t.data.postcode})`}]}).catch(t=>{f(t)})}),(e,a)=>(c(),m(V,{label:l.label,"model-value":l.modelValue,"onUpdate:modelValue":y,options:n.value,onFilter:b,"use-input":"","emit-value":"","map-options":"",dark:l.dark,color:l.dark?"white":"",error:l.invalid,"hide-dropdown-icon":"","input-debounce":"350",autocomplete:"postcode-filter",outlined:l.outlined,disable:l.disabled,"use-chips":"",ref:"qSelectPostcodeRegion",borderless:l.borderless,dense:l.dense,class:"q-pb-none",filled:l.filled,loading:d.value,multiple:l.multiple,placeholder:l.placeholder},{prepend:p(()=>[$(A,{name:"place",color:"info"})]),loading:p(()=>[d.value?(c(),m(B,{key:0})):k("",!0)]),_:1},8,["label","model-value","options","dark","color","error","outlined","disable","borderless","dense","filled","loading","multiple","placeholder"]))}});export{L as _};
