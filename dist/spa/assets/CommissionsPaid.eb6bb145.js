import{A as M,r as Q,B as S,g as Y,o as T,J as N,m as n,K as c,L as a,l as s,O as P,M as F,q as t,b2 as G,S as U,Q as $,n as b,b1 as y,U as i,F as x,ai as o,y as _,R as f}from"./index.7da93179.js";import{Q as v,a as E}from"./QBreadcrumbs.96094532.js";import{Q as I}from"./QBadge.d2d220ed.js";import{Q as C,a as V}from"./QItem.642560fa.js";import{Q as L}from"./QList.709f4980.js";import{Q as R}from"./QMarkupTable.f781861b.js";import{Q as W}from"./QPage.e25f8b02.js";import{m as w,a as z}from"./axios.07c7c7d9.js";import{u as A}from"./use-quasar.41dfdbfa.js";import{_ as B}from"./DateField.87b7069c.js";import{u as H}from"./debug.9f3fb657.js";import{c as u}from"./help.4068c5a1.js";import"./format.3e32b8d9.js";import"./ClosePopup.42f5b568.js";import"./QMenu.00781621.js";const J=t("div",{class:"text-h6 q-mb-md"}," Commissions Paid",-1),K={class:"row q-col-gutter-md"},j={class:"col-xs-12 col-sm-5"},X={class:"col-xs-12 col-sm-5"},Z={class:"col-xs-12 col-sm-2"},tt=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Contractor"),t("th",{style:{width:"100px"},class:"text-left"},"Total"),t("th",{style:{width:"100px"},class:"text-left"},"GST"),t("th",{style:{width:"100px"},class:"text-left"},"Grand")])],-1),et=["onClick"],st={class:"bg-grey-2 text-bold"},at=t("td",null,null,-1),kt=M({__name:"CommissionsPaid",setup(ot){const l=Q(),g=A(),h=Q(!0),p=S({start:w().startOf("isoWeek").format("DD/MM/YYYY"),end:w().endOf("isoWeek").format("DD/MM/YYYY")}),k=()=>{g.loading.show({message:"Fetching commission data..."}),z.post("/user/contractor/reporting/commissionspaid",p).then(r=>{l.value=r.data,g.loading.hide()}).catch(r=>{H(r),g.loading.hide()})},O=r=>{r.showOrders=!r.showOrders},q=Y(()=>l.value&&l.value?h.value?l.value.data.filter(r=>r.commission.total>0):l.value.data:[]);return T(()=>{k()}),(r,d)=>{const D=N("router-link");return n(),c(W,{padding:""},{default:a(()=>[s(E,{class:"q-mb-md q-mt-md"},{separator:a(()=>[s(P,{size:"1.5em",name:"chevron_right"})]),default:a(()=>[s(v,{label:"Home",icon:"home",to:{name:"appDashboard"}}),s(v,{label:"Reporting",to:{name:"reporting"}}),s(v,{label:"Commissions Paid"})]),_:1}),s($,{class:"bg-seamless q-mb-lg"},{default:a(()=>[s(F,null,{default:a(()=>[J,t("div",K,[t("div",j,[s(B,{modelValue:p.start,"onUpdate:modelValue":d[0]||(d[0]=e=>p.start=e),label:"Start",dense:!0,outlined:!0},null,8,["modelValue"])]),t("div",X,[s(B,{modelValue:p.end,"onUpdate:modelValue":d[1]||(d[1]=e=>p.end=e),label:"End",dense:!0,outlined:!0},null,8,["modelValue"])]),t("div",Z,[s(G,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=e=>h.value=e),label:"Only paid",class:"q-mr-md"},null,8,["modelValue"]),s(U,{onClick:d[3]||(d[3]=e=>k()),label:"Submit",color:"primary"})])])]),_:1})]),_:1}),l.value?(n(),c(R,{key:0},{default:a(()=>[tt,t("tbody",null,[(n(!0),b(x,null,y(i(q),e=>(n(),b("tr",{key:e.id},[t("td",null,[t("a",{class:"link text-h6",onClick:m=>O(e)},[f(o(e.fullname)+" ",1),e.contractor_gst_registered?(n(),c(I,{key:0,label:"GST",color:"secondary"})):_("",!0)],8,et),e.showOrders?(n(),c(L,{key:0,dense:""},{default:a(()=>[e.commission.orders.length?_("",!0):(n(),c(C,{key:0},{default:a(()=>[s(V,null,{default:a(()=>[f("No orders found")]),_:1})]),_:1})),(n(!0),b(x,null,y(e.commission.orders,m=>(n(),c(C,{key:m.id},{default:a(()=>[s(V,null,{default:a(()=>[t("div",null,[s(D,{to:{name:"order-edit",params:{id:m.id}},class:"link",target:"_blank"},{default:a(()=>[f("#"+o(m.display_id),1)]),_:2},1032,["to"]),f(" - "+o(m.team.name)+" - "+o(m.scheduled_pickup_date)+" - "+o(i(u)(m.commission_paid_amount))+" / "+o(i(u)(m.commission_paid_amount_gst)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):_("",!0)]),t("td",null,o(i(u)(e.commission.total)),1),t("td",null,o(i(u)(e.commission.totalGst)),1),t("td",null,o(i(u)(e.commission.grandTotal)),1)]))),128))]),t("tfoot",null,[t("tr",st,[at,t("td",null,o(i(u)(l.value.total.total)),1),t("td",null,o(i(u)(l.value.total.gst)),1),t("td",null,o(i(u)(l.value.total.grand)),1)])])]),_:1})):_("",!0)]),_:1})}}});export{kt as default};
