import{A as R,r as g,B as T,i as O,o as z,E as A,m as k,K as $,L as l,l as e,R as v,ai as V,G as P,S as y,ag as J,M as X,N as E,U as w,ak as I,u as Y,ah as Z,q as f,b2 as Q,ae as ee,Q as j,aj as le,y as re,n as ue,F as de,t as me,O as L}from"./index.7da93179.js";import{a as ce,Q as M}from"./QBreadcrumbs.96094532.js";import{Q as F}from"./QSpace.2d911a61.js";import{Q as pe}from"./QHeader.9f36f572.js";import{Q as fe,a as S}from"./QTable.01150601.js";import{a as c,Q as x}from"./QItem.642560fa.js";import{Q as be}from"./QList.709f4980.js";import{Q as ge}from"./QMenu.00781621.js";import{Q as ve}from"./QPage.e25f8b02.js";import{Q as ye,a as _e}from"./QLayout.bec178d3.js";import{C as h}from"./ClosePopup.42f5b568.js";import{a as U}from"./axios.07c7c7d9.js";import{u as B}from"./debug.9f3fb657.js";import{d as ae,o as G,s as Ve,r as we,a as Ce}from"./help.4068c5a1.js";import{Q as oe,a as te}from"./QToolbarTitle.8a26e038.js";import{Q as ne}from"./rtl.ba9e3bff.js";import{Q as ie}from"./QSelect.0342b451.js";import{u as se,r as D}from"./index.esm.0811bb15.js";import"./QResizeObserver.66f1c4a6.js";import"./QMarkupTable.f781861b.js";import"./QLinearProgress.6e390987.js";import"./use-fullscreen.62410448.js";import"./format.3e32b8d9.js";const ke={class:"q-mt-md"},Qe=R({__name:"ProductCategoryCreate",setup(H){const r=g(!1),t=T({id:null,name:null,icon:null,visible_booking:!1,visible_shop:!1,visible_capacity:!1}),b=g(!1),m=O("bus"),p=se({icon:{required:D},name:{required:D}},t),i=()=>{U.post("/productcategory",t).then(()=>{ae("positive","Category created"),m.emit("productCategoryLoadMore"),Object.assign(t,{id:null,name:null,icon:null,visible_booking:!1,visible_shop:!1}),r.value=!1,b.value=!1}).catch(d=>{B(d)})};return z(()=>{m.on("newProductCategory",()=>{r.value=!0})}),A(()=>{m.off("newProductCategory")}),(d,o)=>(k(),$(le,{modelValue:r.value,"onUpdate:modelValue":o[6]||(o[6]=a=>r.value=a)},{default:l(()=>[e(j,{class:"modal"},{default:l(()=>[e(oe,null,{default:l(()=>[e(te,null,{default:l(()=>[v("New "+V(d.$t("productCategory.name")),1)]),_:1}),e(F),P(e(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[h]])]),_:1}),e(J),e(X,null,{default:l(()=>[e(E,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.name=a),label:"Name of the category",error:w(p).name.$invalid},null,8,["modelValue","error"]),e(ie,{modelValue:t.icon,"onUpdate:modelValue":o[1]||(o[1]=a=>t.icon=a),error:w(p).icon.$invalid,options:[{label:"Washing",value:"local_laundry_service"},{value:"iron",label:"Ironing"},{value:"local_shipping",label:"Delivery"},{value:"shopping_bag",label:"Other"}],label:"Icon","map-options":"","emit-value":""},{"selected-item":l(a=>[e(c,{side:""},{default:l(()=>[e(I,{icon:a.opt.value,size:"48px"},null,8,["icon"])]),_:2},1024),e(c,null,{default:l(()=>[v(V(a.opt.label),1)]),_:2},1024)]),option:l(a=>[e(x,Y(Z(a.itemProps)),{default:l(()=>[e(c,{side:""},{default:l(()=>[e(I,{icon:a.opt.value},null,8,["icon"])]),_:2},1024),e(c,null,{default:l(()=>[e(ne,null,{default:l(()=>[v(V(a.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error"]),f("div",ke,[e(Q,{modelValue:t.visible_booking,"onUpdate:modelValue":o[2]||(o[2]=a=>t.visible_booking=a),label:"Visible when booking?"},null,8,["modelValue"])]),f("div",null,[e(Q,{modelValue:t.visible_shop,"onUpdate:modelValue":o[3]||(o[3]=a=>t.visible_shop=a),label:"Visible on the shop?"},null,8,["modelValue"])]),f("div",null,[e(Q,{modelValue:t.visible_capacity,"onUpdate:modelValue":o[4]||(o[4]=a=>t.visible_capacity=a),label:"Visible for capacity?"},null,8,["modelValue"])])]),_:1}),e(ee,{align:"right"},{default:l(()=>[P(e(y,{label:"Cancel",flat:"",color:"secondary"},null,512),[[h]]),e(y,{disable:b.value||w(p).$invalid,label:"Save",color:"primary",onClick:o[5]||(o[5]=a=>i())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Pe={class:"q-mt-md"},he=R({__name:"ProductCategoryEdit",setup(H){const r=g(!1),t=T({id:null,name:null,icon:null,visible_booking:!1,visible_shop:!1,visible_capacity:!1}),b=g(!1),m=O("bus"),p=se({icon:{required:D},name:{required:D}},t),i=()=>{U.put(`/productcategory/${t.id}`,t).then(()=>{ae("positive","Category updated"),m.emit("productCategoryLoadMore"),r.value=!1,b.value=!1}).catch(d=>{B(d)})};return z(()=>{m.on("editProductCategory",d=>{U.get(`/productcategory/${d}`).then(o=>{Object.assign(t,o.data),r.value=!0}).catch(o=>{B(o)})})}),A(()=>{m.off("editProductCategory")}),(d,o)=>(k(),$(le,{modelValue:r.value,"onUpdate:modelValue":o[6]||(o[6]=a=>r.value=a)},{default:l(()=>[t.name?(k(),$(j,{key:0,class:"modal"},{default:l(()=>[e(oe,null,{default:l(()=>[e(te,null,{default:l(()=>[v(V(t.name),1)]),_:1}),e(F),P(e(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[h]])]),_:1}),e(J),e(X,null,{default:l(()=>[e(E,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.name=a),label:"Name of the category",error:w(p).name.$invalid},null,8,["modelValue","error"]),e(ie,{modelValue:t.icon,"onUpdate:modelValue":o[1]||(o[1]=a=>t.icon=a),error:w(p).icon.$invalid,options:[{label:"Washing",value:"local_laundry_service"},{value:"iron",label:"Ironing"},{value:"local_shipping",label:"Delivery"},{value:"shopping_bag",label:"Other"}],label:"Icon","map-options":"","emit-value":""},{"selected-item":l(a=>[e(c,{side:""},{default:l(()=>[e(I,{icon:a.opt.value,size:"48px"},null,8,["icon"])]),_:2},1024),e(c,null,{default:l(()=>[v(V(a.opt.label),1)]),_:2},1024)]),option:l(a=>[e(x,Y(Z(a.itemProps)),{default:l(()=>[e(c,{side:""},{default:l(()=>[e(I,{icon:a.opt.value},null,8,["icon"])]),_:2},1024),e(c,null,{default:l(()=>[e(ne,null,{default:l(()=>[v(V(a.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","error"]),f("div",Pe,[e(Q,{modelValue:t.visible_booking,"onUpdate:modelValue":o[2]||(o[2]=a=>t.visible_booking=a),label:"Visible when booking?"},null,8,["modelValue"])]),f("div",null,[e(Q,{modelValue:t.visible_shop,"onUpdate:modelValue":o[3]||(o[3]=a=>t.visible_shop=a),label:"Visible on the shop?"},null,8,["modelValue"])]),f("div",null,[e(Q,{modelValue:t.visible_capacity,"onUpdate:modelValue":o[4]||(o[4]=a=>t.visible_capacity=a),label:"Visible for capacity?"},null,8,["modelValue"])])]),_:1}),e(ee,{align:"right"},{default:l(()=>[P(e(y,{label:"Cancel",flat:"",color:"secondary"},null,512),[[h]]),e(y,{disable:b.value||w(p).$invalid,label:"Update",color:"primary",onClick:o[5]||(o[5]=a=>i())},null,8,["disable"])]),_:1})]),_:1})):re("",!0)]),_:1},8,["modelValue"]))}}),$e={class:"q-pl-md q-pt-sm q-pr-md q-pb-sm flex items-center",style:{"padding-top":"11px"}},Ue=["onClick"],Ye=R({__name:"ProductCategoryManagement",setup(H){const r=O("bus"),t=g(),b=g(null),m=g(!1),C=T({keyword:null}),p=[{name:"icon",sortable:!0,label:"Icon",field:"icon",align:"left",style:"width:80px"},{name:"name",label:"Name",align:"left",field:"name",sortable:!0},{label:"Actions",name:"actions",sortable:!1,field:"actions"}],i=g({page:1,rowsNumber:G(),rowsPerPage:G(),sortBy:"name",descending:!1}),d=(s=null)=>{let u,n,_,q;s&&s.pagination?(u=s.pagination.page,n=s.pagination.rowsPerPage,_=s.pagination.sortBy,q=s.pagination.descending):(u=i.value.page,n=i.value.rowsPerPage,_=i.value.sortBy,q=i.value.descending),m.value=!0,U.post(`/productcategory/datatable/${u}`,{sortBy:_,sort_order:q?"desc":"asc",skip:u,rowsPerPage:n,keyword:C.keyword}).then(N=>{var W;t.value=N.data.rows,m.value=!1,Ve(n),i.value.rowsNumber=N.data.total,i.value.page=u,i.value.rowsPerPage=n,i.value.sortBy=_,i.value.descending=q,s&&((W=b.value)==null||W.scrollIntoView({behavior:"smooth",block:"center"}))}).catch(N=>{B(N)})},o=s=>{Ce("This will remove the product category").onOk(()=>{U.delete(`/productcategory/${s}`).then(()=>{d()}).catch(u=>{B(u)})})},a=()=>{r.emit("newProductCategory")},K=s=>{r.emit("editProductCategory",s)};return z(()=>{r.on("productCategoryLoadMore",()=>{d()}),d()}),A(()=>{r.off("productCategoryLoadMore")}),(s,u)=>(k(),ue(de,null,[e(Qe),e(he),e(ye,{view:"lHh LpR fFf",container:"",class:"layout-height"},{default:l(()=>[e(pe,{class:me({"page-title text-black":!s.$q.dark.isActive,"bg-dark":s.$q.dark.isActive}),bordered:""},{default:l(()=>[f("div",$e,[e(ce,null,{separator:l(()=>[e(L,{size:"1.5em",name:"chevron_right"})]),default:l(()=>[e(M,{label:"Home",icon:"home",to:{name:"appDashboard"}}),e(M,{label:"Settings",to:{name:"settings"}}),e(M,{label:s.$t("productCategory.namePlural")},null,8,["label"])]),_:1}),e(E,{modelValue:C.keyword,"onUpdate:modelValue":u[0]||(u[0]=n=>C.keyword=n),debounce:500,placeholder:"Keyword search",dense:"",borderless:"",class:"q-ml-lg",clearable:""},{prepend:l(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"]),e(F),e(y,{onClick:u[1]||(u[1]=n=>a()),icon:"add",color:"primary",round:""})])]),_:1},8,["class"]),e(_e,null,{default:l(()=>[e(ve,{padding:""},{default:l(()=>[e(j,null,{default:l(()=>[f("div",{ref_key:"topRef",ref:b},null,512),e(fe,{rows:t.value,columns:p,"row-key":"id",filter:C.keyword,loading:m.value,pagination:i.value,"onUpdate:pagination":u[2]||(u[2]=n=>i.value=n),onRequest:d,class:"no-shadow","rows-per-page-options":w(we)},{"body-cell-icon":l(n=>[e(S,{props:n},{default:l(()=>[e(L,{name:n.row.icon,size:"32px"},null,8,["name"])]),_:2},1032,["props"])]),"body-cell-name":l(n=>[e(S,{props:n},{default:l(()=>[f("a",{onClick:_=>K(n.row.id),class:"link"},V(n.row.name),9,Ue)]),_:2},1032,["props"])]),"body-cell-actions":l(n=>[e(S,{props:n},{default:l(()=>[e(y,{flat:"",icon:"more_vert"},{default:l(()=>[e(ge,null,{default:l(()=>[e(be,null,{default:l(()=>[P((k(),$(x,{clickable:"",onClick:_=>K(n.row.id)},{default:l(()=>[e(c,null,{default:l(()=>[v("Edit record")]),_:1})]),_:2},1032,["onClick"])),[[h]]),P((k(),$(x,{clickable:"",onClick:_=>o(n.row.id)},{default:l(()=>[e(c,null,{default:l(()=>[v("Delete")]),_:1})]),_:2},1032,["onClick"])),[[h]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","filter","loading","pagination","rows-per-page-options"])]),_:1})]),_:1})]),_:1})]),_:1})],64))}});export{Ye as default};
