import{Q as f}from"./QSelect.853d535e.js";import{A as G,g as R,r as w,i as Y,m,n as _,q as t,b8 as g,l as s,L as n,Q as V,F,K as U,M as c,U as e,N as i,O as j,y as p,S as D,af as y,bp as K,ae as h}from"./index.e647c85a.js";import{Q as $}from"./QExpansionItem.0ce2aff8.js";import{Q as z}from"./QList.2f0afc60.js";import{_ as H}from"./ndis_heart.0820b9e2.js";import{u as J,r as u,a as N}from"./index.esm.4557c89b.js";import{u as W}from"./use-quasar.ae4f72e4.js";import{a as L}from"./axios.ccd3a804.js";import{_ as C,a as I}from"./CountryField.01d37ae9.js";import{_ as M}from"./DateField.75075dac.js";import{_ as S}from"./PostcodeRegionField.1ba1a165.js";import{u as T}from"./debug.805a8aef.js";import{b as X}from"./help.c0f85e41.js";import"./QItemSection.99659658.js";import"./rtl.4f5e13e8.js";import"./format.8e90d58d.js";import"./ClosePopup.ef2f7039.js";const Z={class:"text-h5"},x={class:"row q-col-gutter-md"},ee={class:"row q-col-gutter-md"},le={key:0,class:"col-xs-12 col-sm-4"},ae={key:0,class:"q-mb-md q-mt-xs"},oe={key:0,class:"text-negative"},se={key:1,class:"text-positive"},de={class:"q-mr-sm"},te={class:"row q-col-gutter-md"},ne={class:"row q-col-gutter-md"},ie={key:0},re={class:"row q-col-gutter-md"},ue={class:"col-xs-6"},me={class:"col-xs-6"},pe={class:"row q-col-gutter-md"},be={class:"row q-col-gutter-md"},_e={class:"row q-col-gutter-md"},Ve=t("img",{src:H,style:{height:"32px"}},null,-1),ve={class:"row q-col-gutter-md"},fe={class:"row q-col-gutter-md"},ge={class:"q-mt-md"},ce={class:"row q-col-gutter-md"},ye={class:"q-mt-sm"},$e={class:"row q-col-gutter-md"},Oe=G({__name:"TeamEdit",props:{model:null},setup(v){const A=v,l=R(()=>A.model),q=w(!1),Q=w(!1),b=w(),k=W(),E=Y("bus"),P={type:{required:u},name:{required:u},first_name:{required:u},last_name:{required:u},email:{required:u},mobile:{required:u},ndis_number:{requiredIf:N(()=>l.value.type==="NDIS")},ndis_type:{requiredIf:N(()=>l.value.type==="NDIS")},aged_care_client_number:{requiredIf:N(()=>l.value.type==="Aged Care")},address2:{required:u},suburb_postcode_region_id:{required:u},country_id:{required:u},payment_terms:{required:u},status:{required:u}},r=J(P,l,{$scope:!1}),B=()=>{q.value=!0,L.put(`/team/${A.model.id}`,l.value).then(()=>{X("positive","Saved"),E.emit("getTeam"),q.value=!1}).catch(d=>{T(d),q.value=!1})},O=()=>{l.value.abn||(Q.value=!1),k.loading.show({message:"Verifying ABN with the ATO..."}),L.post("/verifynest/verifyabn",{keyword:l.value.abn}).then(d=>{Q.value=!d.data.data.Message,l.value.abn_verified=!d.data.data.Message,l.value.abn_verified&&B(),b.value=d.data.data,k.loading.hide()}).catch(d=>{k.loading.hide(),T(d)})};return(d,a)=>(m(),_(F,null,[t("div",Z,g(d.$t("team.name"))+" "+g(d.$t("team.details")),1),t("p",null,"Certain details can be modified by the "+g(d.$t("team.name").toLowerCase())+" in addition to the staff.",1),s(V,null,{default:n(()=>[v.model.id?(m(),U(z,{key:0},{default:n(()=>[s($,{group:"team",label:d.$t("team.information"),"default-opened":"","header-class":"text-h6"},{default:n(()=>[s(V,{class:"q-mb-md"},{default:n(()=>[s(c,null,{default:n(()=>[t("div",x,[s(f,{modelValue:e(l).type,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).type=o),error:e(r).type.$invalid,label:d.$t("team.type"),options:["Residential","Business","NDIS","Aged Care","DVA","Sporting Group","Other"],class:"col-xs-12 col-sm-8"},null,8,["modelValue","error","label"]),s(f,{modelValue:e(l).status,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).status=o),error:e(r).status.$invalid,label:"Status","map-options":"","emit-value":"",class:"col-xs-12 col-sm-4",options:[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"archived",label:"Archived"}]},null,8,["modelValue","error"])]),t("div",ee,[s(i,{modelValue:e(l).name,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).name=o),label:["Business","Aged Care","Sporting Group"].indexOf(v.model.type||"")!==-1?d.$t("team.teamName"):d.$t("team.name"),error:e(r).name.$invalid,class:"col-xs-12 col-sm-8"},null,8,["modelValue","label","error"]),["Business","Aged Care","Sporting Group"].indexOf(v.model.type||"")!==-1?(m(),_("div",le,[s(i,{modelValue:e(l).abn,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).abn=o),label:d.$t("team.abn")},{append:n(()=>[e(l).abn_verified?(m(),U(j,{key:0,name:"check",color:"positive"})):p("",!0),e(l).abn?(m(),U(D,{key:1,onClick:a[3]||(a[3]=o=>O()),color:"primary",label:"Verify",flat:""})):p("",!0)]),_:1},8,["modelValue","label"]),b.value?(m(),_("div",ae,[b.value.Message?(m(),_("div",oe,g(b.value.Message),1)):p("",!0),b.value.Message?p("",!0):(m(),_("div",se,[t("span",de,"ABN Registered to: "+g(b.value.EntityName),1)]))])):p("",!0)])):p("",!0)]),t("div",te,[s(i,{modelValue:e(l).first_name,"onUpdate:modelValue":a[5]||(a[5]=o=>e(l).first_name=o),label:d.$t("team.firstName"),error:e(r).first_name.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"]),s(i,{modelValue:e(l).last_name,"onUpdate:modelValue":a[6]||(a[6]=o=>e(l).last_name=o),label:d.$t("team.lastName"),error:e(r).last_name.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"])]),t("div",ne,[s(i,{modelValue:e(l).email,"onUpdate:modelValue":a[7]||(a[7]=o=>e(l).email=o),label:d.$t("team.email"),error:e(r).email.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"]),s(i,{modelValue:e(l).mobile,"onUpdate:modelValue":a[8]||(a[8]=o=>e(l).mobile=o),label:d.$t("team.mobile"),error:e(r).mobile.$invalid,mask:"#### ### ###","unmasked-value":"",class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"])]),v.model.type==="Aged Care"?(m(),_("div",ie,[s(i,{modelValue:e(l).aged_care_client_number,"onUpdate:modelValue":a[9]||(a[9]=o=>e(l).aged_care_client_number=o),label:d.$t("team.agedCareClientNumber"),error:e(r).aged_care_client_number.$invalid},null,8,["modelValue","label","error"])])):p("",!0),t("div",re,[t("div",ue,[s(f,{modelValue:e(l).payment_terms,"onUpdate:modelValue":a[10]||(a[10]=o=>e(l).payment_terms=o),error:e(r).payment_terms.$invalid,label:d.$t("team.paymentTerms"),options:["Credit Card","Bank Transfer"]},null,8,["modelValue","error","label"])]),t("div",me,[s(y,{modelValue:e(l).owing_no_booking,"onUpdate:modelValue":a[11]||(a[11]=o=>e(l).owing_no_booking=o),label:d.$t("team.owingNoBooking")},null,8,["modelValue","label"])])])]),_:1})]),_:1})]),_:1},8,["label"]),s($,{group:"team",label:d.$t("team.financial"),"header-class":" text-h6"},{default:n(()=>[s(V,null,{default:n(()=>[s(c,null,{default:n(()=>[t("div",pe,[s(i,{modelValue:e(l).invoice_name,"onUpdate:modelValue":a[12]||(a[12]=o=>e(l).invoice_name=o),label:d.$t("team.invoiceName"),class:"col-xs-12 col-sm-6","bottom-slots":""},null,8,["modelValue","label"]),s(i,{modelValue:e(l).invoice_po,"onUpdate:modelValue":a[13]||(a[13]=o=>e(l).invoice_po=o),label:d.$t("team.invoicePo"),class:"col-xs-12 col-sm-6","bottom-slots":""},null,8,["modelValue","label"])]),s(C,{model:e(l),filled:!0,addressfields:{address1:"invoice_address1",address2:"invoice_address2",suburb_postcode_region_id:"invoice_address_suburb_postcode_region_id",lat:"lat",lng:"lng",country_id:"invoice_address_country_id"},placeholder:d.$t("address.search")},null,8,["model","placeholder"]),s(i,{modelValue:e(l).invoice_address1,"onUpdate:modelValue":a[14]||(a[14]=o=>e(l).invoice_address1=o),label:d.$t("address.line1"),"bottom-slots":""},null,8,["modelValue","label"]),s(i,{modelValue:e(l).invoice_address2,"onUpdate:modelValue":a[15]||(a[15]=o=>e(l).invoice_address2=o),label:d.$t("address.line2"),"bottom-slots":""},null,8,["modelValue","label"]),t("div",be,[s(S,{modelValue:e(l).invoice_address_suburb_postcode_region_id,"onUpdate:modelValue":a[16]||(a[16]=o=>e(l).invoice_address_suburb_postcode_region_id=o),label:d.$t("address.suburb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(I,{modelValue:e(l).invoice_address_country_id,"onUpdate:modelValue":a[17]||(a[17]=o=>e(l).invoice_address_country_id=o),label:d.$t("address.country"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1},8,["label"]),e(l).type==="NDIS"?(m(),U($,{key:0,group:"team",label:d.$t("team.ndis"),"header-class":" text-h6"},{default:n(()=>[s(V,null,{default:n(()=>[s(c,null,{default:n(()=>[t("div",_e,[s(i,{modelValue:e(l).ndis_number,"onUpdate:modelValue":a[18]||(a[18]=o=>e(l).ndis_number=o),label:d.$t("team.ndisNumber"),error:e(r).ndis_number.$invalid,class:"col-xs-12 col-sm-6"},{prepend:n(()=>[Ve]),_:1},8,["modelValue","label","error"]),s(f,{modelValue:e(l).ndis_type,"onUpdate:modelValue":a[19]||(a[19]=o=>e(l).ndis_type=o),label:d.$t("team.ndisType"),error:e(r).ndis_type.$invalid,options:["Self managed","Plan managed","NDIA registered"],class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","error"])]),t("div",ve,[s(i,{modelValue:e(l).ndis_plan_manager_email,"onUpdate:modelValue":a[20]||(a[20]=o=>e(l).ndis_plan_manager_email=o),label:d.$t("team.ndisPlanManagerEmail"),"bottom-slots":"",class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(i,{modelValue:e(l).ndis_support_coordinator_email,"onUpdate:modelValue":a[21]||(a[21]=o=>e(l).ndis_support_coordinator_email=o),label:d.$t("team.ndisSupportCoordinatorEmail"),class:"col-xs-12 col-sm-6","bottom-slots":""},null,8,["modelValue","label"])]),t("div",fe,[s(M,{modelValue:e(l).ndis_plan_start,"onUpdate:modelValue":a[22]||(a[22]=o=>e(l).ndis_plan_start=o),label:d.$t("team.ndisPlanStart"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(M,{modelValue:e(l).ndis_plan_end,"onUpdate:modelValue":a[23]||(a[23]=o=>e(l).ndis_plan_end=o),label:d.$t("team.ndisPlanEnd"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])]),t("div",ge,[s(y,{modelValue:e(l).ndis_line_item,"onUpdate:modelValue":a[24]||(a[24]=o=>e(l).ndis_line_item=o),label:"Yes I (the client) have item number 01_021_0120_1_1 \u2013 Linen Service stated in my current NDIS plan"},null,8,["modelValue"])]),t("div",null,[s(y,{modelValue:e(l).ndis_funds,"onUpdate:modelValue":a[25]||(a[25]=o=>e(l).ndis_funds=o),label:"Yes I (the client) have sufficient funds available under the Linen code to pay for my services and I agree to inform Laundry Lady if funds run out"},null,8,["modelValue"])]),t("div",null,[s(y,{modelValue:e(l).ndis_funds_inform,"onUpdate:modelValue":a[26]||(a[26]=o=>e(l).ndis_funds_inform=o),label:"Yes I (the client) agree to inform Laundry Lady if there are any changes to my plan that will affect claiming under this code"},null,8,["modelValue"])]),s(f,{modelValue:e(l).ndis_payment,"onUpdate:modelValue":a[27]||(a[27]=o=>e(l).ndis_payment=o),class:"q-mt-md q-mb-md",options:[{value:"self",label:"I (the client) will pay for services myself and will be responsible for claiming under the NDIS (self-managed)"},{value:"plan",label:"The invoice should be sent to my plan manager for payment"}],"map-options":"","emit-value":"",label:d.$t("team.ndisPayment")},null,8,["modelValue","options","label"])]),_:1})]),_:1})]),_:1},8,["label"])):p("",!0),s($,{group:"team",label:d.$t("team.pickupAddress"),"header-class":" text-h6"},{default:n(()=>[s(V,null,{default:n(()=>[s(c,null,{default:n(()=>[s(C,{model:e(l),filled:!0,addressfields:{address1:"address1",address2:"address2",suburb_postcode_region_id:"suburb_postcode_region_id",lat:"lat",lng:"lng",country_id:"country_id"},placeholder:d.$t("address.search")},null,8,["model","placeholder"]),s(i,{modelValue:e(l).address1,"onUpdate:modelValue":a[28]||(a[28]=o=>e(l).address1=o),label:d.$t("address.line1"),"bottom-slots":""},null,8,["modelValue","label"]),s(i,{modelValue:e(l).address2,"onUpdate:modelValue":a[29]||(a[29]=o=>e(l).address2=o),error:e(r).address2.$invalid,label:d.$t("address.line2")},null,8,["modelValue","error","label"]),t("div",ce,[s(S,{modelValue:e(l).suburb_postcode_region_id,"onUpdate:modelValue":a[30]||(a[30]=o=>e(l).suburb_postcode_region_id=o),invalid:e(r).suburb_postcode_region_id.$invalid,label:d.$t("address.suburb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","invalid","label"]),s(I,{modelValue:e(l).country_id,"onUpdate:modelValue":a[31]||(a[31]=o=>e(l).country_id=o),label:d.$t("address.country"),class:"col-xs-12 col-sm-6",invalid:e(r).country_id.$invalid},null,8,["modelValue","label","invalid"])]),s(i,{modelValue:e(l).pickup_instructions,"onUpdate:modelValue":a[32]||(a[32]=o=>e(l).pickup_instructions=o),label:d.$t("team.pickupInstructions"),autogrow:"",type:"textarea",class:"q-mt-md",outlined:""},null,8,["modelValue","label"]),t("div",ye,[s(y,{modelValue:e(l).atl,"onUpdate:modelValue":a[33]||(a[33]=o=>e(l).atl=o),label:d.$t("team.atl")},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1},8,["label"]),s($,{group:"team",label:"Postal Address","header-class":"text-h6"},{default:n(()=>[s(V,null,{default:n(()=>[s(c,null,{default:n(()=>[s(C,{model:e(l),filled:!0,addressfields:{address1:"postal_address1",address2:"postal_address2",suburb_postcode_region_id:"postal_suburb_postcode_region_id",lat:"postal_lat",lng:"postal_lng",country_id:"postal_country_id"},placeholder:d.$t("address.search")},null,8,["model","placeholder"]),s(i,{modelValue:e(l).postal_address1,"onUpdate:modelValue":a[34]||(a[34]=o=>e(l).postal_address1=o),label:d.$t("address.line1"),"bottom-slots":""},null,8,["modelValue","label"]),s(i,{modelValue:e(l).postal_address2,"onUpdate:modelValue":a[35]||(a[35]=o=>e(l).postal_address2=o),label:d.$t("address.line2")},null,8,["modelValue","label"]),t("div",$e,[s(S,{modelValue:e(l).postal_suburb_postcode_region_id,"onUpdate:modelValue":a[36]||(a[36]=o=>e(l).postal_suburb_postcode_region_id=o),label:d.$t("address.suburb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),s(I,{modelValue:e(l).postal_country_id,"onUpdate:modelValue":a[37]||(a[37]=o=>e(l).postal_country_id=o),label:d.$t("address.country"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),s(K,{class:"q-mt-md"}),s(h,{class:"bg-grey-1",align:"right"},{default:n(()=>[s(D,{onClick:a[38]||(a[38]=o=>B()),label:d.$t("actions.save"),color:"primary",disabled:e(r).$invalid},null,8,["label","disabled"])]),_:1})]),_:1})],64))}});export{Oe as default};
