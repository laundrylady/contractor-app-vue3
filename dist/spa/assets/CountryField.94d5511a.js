import{A as _,r as p,m as v,K as g,L as i,l as f,O as m,u as $,ah as x,R as A,ai as V,o as k,w as Q}from"./index.7da93179.js";import{Q as C,a as h}from"./QItem.642560fa.js";import{Q as S}from"./rtl.ba9e3bff.js";import{Q as B}from"./QSelect.0342b451.js";import{a as b}from"./axios.07c7c7d9.js";import{u as y}from"./debug.9f3fb657.js";const w=(e,t,l,n,o,s,c,a)=>{!t||(e.flat_number&&e.flat_number!==""?(e.flat_type&&(t[l]=e.flat_type),t[l]=t[l]?`${t[l]} ${e.flat_number_prefix||""}${e.flat_number}${e.flat_number_suffix||""}`:`${e.flat_number_prefix||""}${e.flat_number}${e.flat_number_suffix||""}`):t[l]="",e.number_first&&e.number_first!==""?(t[n]=`${e.number_first_prefix||""}${e.number_first}${e.number_first_suffix||""}`,e.number_last&&(t[n]+=`-${e.number_last_prefix||""}${e.number_last}${e.number_last_suffix||""}`)):t[n]="",e.street_name&&e.street_name!==""&&(t[n]+=" "+e.street_name),e.street_type_code&&e.street_type_code!==""&&(t[n]+=" "+e.street_type_code),s&&(t[s]=e.latitude),s&&(t[c]=e.longitude),o&&(t[o]=e.suburb_postcode_region_id),a&&(t[a]=e.country_id))},M=_({__name:"AddressSearch",props:{model:null,addressfields:null,invalid:{type:Boolean},dark:{type:Boolean},outlined:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},dense:{type:Boolean},borderless:{type:Boolean},filled:{type:Boolean},placeholder:null},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,n=p(),o=p(!1),s=p(),c=()=>{w(n.value,l.model,l.addressfields.address1,l.addressfields.address2,l.addressfields.suburb_postcode_region_id,l.addressfields.lat,l.addressfields.lng,l.addressfields.country_id),n.value=null,t("update:modelValue",null)},a=(u,r)=>{u.length>3&&(o.value=!0,s.value=[{unit_number:"Searching addresses..."}],b.post("/address",{address:u}).then(d=>{r(()=>{s.value=d.data.data,o.value=!1})}).catch(d=>(y(d),o.value=!1,[])))};return(u,r)=>(v(),g(B,{modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=d=>n.value=d),c],options:s.value,"use-input":"",placeholder:e.placeholder,onFilter:a,"hide-dropdown-icon":"","input-debounce":"200",autocomplete:"search-filter",class:"q-mb-sm",outlined:"",filled:e.filled,dense:"",loading:o.value},{prepend:i(()=>[f(m,{name:"search"})]),loading:i(()=>[]),option:i(d=>[f(C,$(x(d.itemProps)),{default:i(()=>[f(h,{avatar:""},{default:i(()=>[f(m,{name:"place"})]),_:1}),f(h,null,{default:i(()=>[f(S,null,{default:i(()=>[A(V(d.opt.formatted),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","placeholder","filled","loading"]))}}),N=_({__name:"CountryField",props:{modelValue:null,invalid:{type:Boolean},label:null,dark:{type:Boolean},outlined:{type:Boolean},disabled:{type:Boolean},multiple:{type:Boolean},dense:{type:Boolean},borderless:{type:Boolean},filled:{type:Boolean},placeholder:null,nowatch:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,n=p(!1),o=p(),s=a=>{t("update:modelValue",a)},c=(a,u)=>{a.length<2||(n.value=!0,b.get(`/public/country/index?keyword=${a}`).then(r=>{u(()=>{o.value=r.data.map(d=>({value:d.id,label:d.name})),n.value=!1})}).catch(r=>{n.value=!1,y(r)}))};return k(()=>{l.modelValue&&(Array.isArray(l.modelValue)&&l.modelValue.length||!Array.isArray(l.modelValue))&&b.get(`/public/country/${l.modelValue}`).then(a=>{Array.isArray(a.data)?(o.value=a.data.map(u=>({value:u.id,label:u.name})),n.value=!1):(o.value=[{value:a.data.id,label:a.data.name}],n.value=!1)})}),Q(()=>l.modelValue,(a,u)=>{!l.nowatch&&a&&a!==u&&(Array.isArray(a)&&a.length||!Array.isArray(a))&&b.get(`/public/country/${a}`).then(r=>{o.value=[{value:r.data.id,label:r.data.name}]}).catch(r=>{y(r)})}),(a,u)=>(v(),g(B,{label:e.label,"model-value":e.modelValue,"onUpdate:modelValue":s,options:o.value,onFilter:c,"use-input":"","emit-value":"","map-options":"",dark:e.dark,color:e.dark?"white":"",error:e.invalid,"hide-dropdown-icon":"","input-debounce":"350",autocomplete:"country-filter",outlined:e.outlined,disable:e.disabled,"use-chips":"",ref:"qSelectCountry",borderless:e.borderless,dense:e.dense,class:"q-pb-none",filled:e.filled,loading:n.value,multiple:e.multiple,placeholder:e.placeholder},{prepend:i(()=>[f(m,{name:"language",color:"info"})]),_:1},8,["label","model-value","options","dark","color","error","outlined","disable","borderless","dense","filled","loading","multiple","placeholder"]))}});export{M as _,N as a};
