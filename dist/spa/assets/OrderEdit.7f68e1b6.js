import{A as G,g as z,r as C,B as re,o as K,m as i,K as x,L as s,n as _,F as U,b1 as D,t as ae,l as e,ak as ce,R as g,ai as n,q as l,U as t,N as R,S as P,y as p,O as de,G as ie,i as ee,E as me,Q as O,M as A,aj as _e,af as pe,J as ve,b2 as fe,ae as oe,ag as ge,b3 as be}from"./index.7da93179.js";import{Q as Z}from"./QSelect.0342b451.js";import{Q as he}from"./QTime.1028d462.js";import{Q as j}from"./QExpansionItem.663ba948.js";import{Q as S,a as q}from"./QItem.642560fa.js";import{Q as J}from"./QList.709f4980.js";import{Q as ye}from"./rtl.ba9e3bff.js";import{u as ke,r as X}from"./index.esm.0811bb15.js";import{a as E}from"./axios.07c7c7d9.js";import{_ as $e,a as xe}from"./CountryField.94d5511a.js";import{_ as Ve}from"./DateField.87b7069c.js";import{_ as qe}from"./PostcodeRegionField.ad7180b3.js";import{_ as we,a as Qe}from"./OrderContractorManagement.783fe33b.js";import{_ as Te}from"./GlobalNotes.f08d3159.js";import{Q as Ce}from"./QMenu.00781621.js";import{C as ne}from"./ClosePopup.42f5b568.js";import{u as L}from"./debug.9f3fb657.js";import{g as Ie,c as y,a as te,b as se,d as ue,e as Oe,h as Pe,f as Ue,i as Se,j as De,k as Ne}from"./help.4068c5a1.js";import{_ as le}from"./StatusTag.c958dd1f.js";import{_ as Be}from"./UserAvatar.41db8b9e.js";import{_ as Ae}from"./xero.d31d04af.js";import{Q as Ee,a as Le}from"./QToolbarTitle.8a26e038.js";import{Q as Me}from"./QSpace.2d911a61.js";import{Q as Fe}from"./QMarkupTable.f781861b.js";import{u as Xe}from"./use-quasar.41dfdbfa.js";import{p as Re}from"./helpers.84dd3d7a.js";import{u as Je}from"./vue-i18n.runtime.esm-bundler.dc0339a7.js";import"./format.3e32b8d9.js";import"./TouchPan.cb35dc49.js";import"./QLinearProgress.6e390987.js";import"./QBadge.d2d220ed.js";const je={class:"text-grey"},ze={class:"text-h6"},Ge={class:"row"},Ke={class:"text-h6 q-pa-sm bg-grey-2"},We={class:"text-grey"},He=G({__name:"OrderProductManagement",props:{model:null},emits:["update:products"],setup(u,{emit:V}){const h=u,k=z(()=>h.model),v=C(),w=C([26,35,36]),d=C(),Q={order_id:null,name:null,product_id:null,cost:null,price:null,qty:1,notes:null,product:{},tax:!1},$=C(!1),a=re(JSON.parse(JSON.stringify(Q))),N=["Washing","Ironing","Other","Delivery"].reduce((c,b,m)=>({...c,[b]:m}),{}),W=z(()=>{if(v.value){const c=JSON.parse(JSON.stringify(v.value)),b=h.model.products.map(m=>m.product_id);for(const m of c)m.data=m.data.filter(T=>b.indexOf(T.id)===-1);return c.filter(m=>m.data.length).sort((m,T)=>N[m.key]-N[T.key])}return[]}),B=()=>{const c=k.value.products.findIndex(b=>b.product_id===26);c!==-1?k.value.products.splice(c,0,{product:a.product,name:a.name,product_id:a.product_id,cost:a.cost,price:a.price,qty:a.qty,notes:a.notes,tax:a.tax}):k.value.products.push({product:a.product,name:a.name,product_id:a.product_id,cost:a.cost,price:a.price,qty:a.qty,notes:a.notes,tax:a.tax})},H=c=>{te("This will remove the product from the order permenantly").onOk(()=>{k.value.products.splice(c,1),o()})},Y=c=>{a.product=c,a.product_id=c.id,a.name=c.name,a.cost=c.unit_cost,a.price=c.unit_price,a.qty=c.unit_minimum,a.tax=c.tax,setTimeout(()=>{if(B(),!k.value.products.find(b=>b.product_id===26)){const b=d.value.find(m=>m.id===26);b&&(a.product=b,a.product_id=b.id,a.name=b.name,a.cost=b.unit_cost,a.price=b.unit_price,a.qty=b.unit_minimum,a.tax=b.tax,B())}o(),Object.assign(a,JSON.parse(JSON.stringify(Q)))},100)},f=c=>{c.qty>1&&(c.qty=parseFloat(c.qty.toString())-1),o()},r=c=>{c.qty=parseFloat(c.qty.toString())+1,o()},M=()=>{o()},o=()=>{if(!h.model.id)return!0;$.value=!0,E.put(`/order/${h.model.id}?cp=true`,k.value).then(()=>{$.value=!1,V("update:products")}).catch(c=>{L(c)})};return K(()=>{E.get("/product/index").then(c=>{d.value=c.data,v.value=Ie(c.data.filter(b=>h.model.productcategories.find(m=>m.id===b.product_category_id)||b.productcategory.name==="Delivery"),"productcategory.name")}).catch(c=>{L(c)})}),(c,b)=>(i(),x(J,{separator:"",bordered:""},{default:s(()=>[(i(!0),_(U,null,D(u.model.products,(m,T)=>(i(),x(S,{key:T,class:ae({"bg-grey-1":T%2!==0})},{default:s(()=>[e(q,{avatar:"",class:"cursor-move"},{default:s(()=>[e(ce,{icon:m.product.productcategory.icon,size:"48px"},null,8,["icon"])]),_:2},1024),e(q,null,{default:s(()=>[g(n(m.name)+" ",1),l("div",je,"Price per "+n(m.product.unit_measurement)+": "+n(t(y)(m.price)),1)]),_:2},1024),w.value.indexOf(m.product_id)===-1?(i(),x(q,{key:0,class:"col-xs-12 col-sm-3"},{default:s(()=>[e(R,{modelValue:m.qty,"onUpdate:modelValue":[F=>m.qty=F,M],type:"number",min:"1",borderless:"",label:`${m.product.unit_measurement.toUpperCase()}S`,filled:"",debounce:500},{prepend:s(()=>[e(P,{onClick:F=>f(m),color:"primary",icon:"remove",dense:"",disable:$.value},null,8,["onClick","disable"])]),append:s(()=>[e(P,{onClick:F=>r(m),color:"primary",icon:"add",dense:"",disable:$.value},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)):p("",!0),w.value.indexOf(m.product_id)===-1?(i(),x(q,{key:1,side:""},{default:s(()=>[e(P,{onClick:F=>H(T),icon:"delete",color:"negative",title:"Remove Product",flat:"",disable:$.value},null,8,["onClick","disable"])]),_:2},1024)):p("",!0)]),_:2},1032,["class"]))),128)),u.model.id?(i(),x(S,{key:0},{default:s(()=>[e(q),e(q,{class:"text-right"},{default:s(()=>[l("div",null,[l("div",null,"Subtotal: "+n(t(y)(u.model.total_price)),1),l("div",null,"GST: "+n(t(y)(u.model.total_price_gst)),1),l("div",ze,"Total: "+n(t(y)(u.model.grand_total_price)),1)])]),_:1})]),_:1})):p("",!0),e(S,null,{default:s(()=>[e(q,null,{default:s(()=>[e(P,{label:a.product_id?`${a.name}`:`Add a ${c.$t("product.name")}`,outline:"","no-caps":"",color:"primary",icon:"add_circle",disable:$.value},{default:s(()=>[e(Ce,{anchor:"center middle",self:"center middle",class:"soft-shadow"},{default:s(()=>[l("div",Ge,[(i(!0),_(U,null,D(t(W),m=>(i(),_("div",{class:"col-xs-12",key:m.key},[l("div",Ke,[e(de,{name:m.data[0].productcategory.icon,size:"32px"},null,8,["name"]),g(" "+n(m.key),1)]),e(J,{separator:""},{default:s(()=>[(i(!0),_(U,null,D(m.data,T=>ie((i(),x(S,{onClick:F=>Y(T),clickable:"",key:T.id},{default:s(()=>[e(q,null,{default:s(()=>[g(n(T.name)+" ",1),l("div",We,n(t(y)(T.unit_price))+" per "+n(T.unit_measurement),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[ne]])),128))]),_:2},1024)]))),128))])]),_:1})]),_:1},8,["label","disable"])]),_:1})]),_:1})]),_:1}))}}),Ye={class:"row q-col-gutter-md q-mb-lg q-mt-xs"},Ze={class:"col-xs-12 col-sm-2"},et=l("div",{class:"text-bold"},"To",-1),tt={class:"col-xs-12 col-sm-4"},lt=l("div",{class:"text-bold"},"Reference",-1),ot={class:"col-xs-12 col-sm-2"},st=l("div",{class:"text-bold"},"Invoice Number",-1),at={class:"col-xs-12 col-sm-2"},dt=l("div",{class:"text-bold"},"Issue Date",-1),it={class:"col-xs-12 col-sm-2"},nt=l("div",{class:"text-bold"},"Due Date",-1),ut=l("thead",null,[l("tr",null,[l("th",{style:{width:"60px"}},"Qty"),l("th",{class:"text-left"},"Product"),l("th",{style:{width:"85px"}},"Amount"),l("th",{style:{width:"80px"}},"Tax"),l("th",{style:{width:"100px"}},"Total")])],-1),rt={class:"text-center"},ct={class:"text-left"},mt=l("td",null,null,-1),_t=l("td",null,null,-1),pt={class:"text-bold"},vt={class:"text-bold"},ft={class:"text-bold"},gt=l("td",null,null,-1),bt=l("td",null,null,-1),ht=l("td",null,null,-1),yt=l("span",{class:"text-bold text-positive"},"Paid:",-1),kt=l("br",null,null,-1),$t=l("span",{class:"text-bold text-negative"},"DUE:",-1),xt=l("br",null,null,-1),Vt=G({__name:"XeroInvoiceView",setup(u){const V=ee("bus"),h=C(!1),k=C(),v=C(),w=Xe(),d=()=>{w.loading.show({message:"Loading invoice..."}),E.get(`/xero/invoice/${k.value}`).then(Q=>{v.value=Q.data.data[0],h.value=!0,w.loading.hide()}).catch(Q=>{L(Q),w.loading.hide()})};return K(()=>{V.on("xeroInvoiceView",Q=>{k.value=Q,d()})}),me(()=>{V.off("xeroInvoiceView")}),(Q,$)=>(i(),x(_e,{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=a=>h.value=a)},{default:s(()=>[v.value&&v.value.reference?(i(),x(O,{key:0,class:"modal"},{default:s(()=>[e(Ee,{class:"bg-primary text-white"},{default:s(()=>[e(Le,{class:"col-grow"},{default:s(()=>[g(n(v.value.reference),1)]),_:1}),e(Me),e(le,{status:v.value.status,class:"q-mr-xs"},null,8,["status"]),ie(e(P,{dense:"",round:"",flat:"",icon:"close"},null,512),[[ne]])]),_:1}),e(A,null,{default:s(()=>[l("div",Ye,[l("div",Ze,[et,g(" "+n(v.value.contact.name),1)]),l("div",tt,[lt,g(" "+n(v.value.reference),1)]),l("div",ot,[st,g(" #"+n(v.value.invoiceNumber),1)]),l("div",at,[dt,g(" "+n(t(se)(v.value.date)),1)]),l("div",it,[nt,g(" "+n(t(se)(v.value.dueDate)),1)])]),e(Fe,{flat:"",bordered:"","wrap-cells":""},{default:s(()=>[ut,l("tbody",null,[(i(!0),_(U,null,D(v.value.lineItems,a=>(i(),_("tr",{key:a.lineItemID},[l("td",rt,n(a.quantity),1),l("td",ct,n(a.description),1),l("td",null,n(t(y)(a.lineAmount)),1),l("td",null,n(t(y)(a.taxAmount)),1),l("td",null,n(t(y)(a.taxAmount+a.lineAmount)),1)]))),128)),l("tr",null,[mt,_t,l("td",pt,n(t(y)(v.value.subTotal)),1),l("td",vt,n(t(y)(v.value.totalTax)),1),l("td",ft,n(t(y)(v.value.total)),1)])]),l("tfoot",null,[l("tr",null,[gt,bt,ht,l("td",null,[yt,kt,g(n(t(y)(v.value.amountPaid)),1)]),l("td",null,[$t,xt,g(n(t(y)(v.value.amountDue)),1)])])])]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1},8,["modelValue"]))}}),qt={class:"q-pa-md"},wt={class:"row q-col-gutter-md items-center"},Qt=l("div",{class:"col-xs-12 col-sm-2"},[l("img",{src:Ae,style:{"max-width":"100%"}})],-1),Tt={class:"col-xs-12 col-sm-10"},Ct={key:0},It={key:1},Ot={class:"q-mb-xs"},Pt=l("br",null,null,-1),Ut={key:0,class:"q-mt-xs"},St={key:1,class:"q-mt-xs text-negative"},Dt=G({__name:"XeroInvoice",props:{invoiceId:null,type:null,type_id:null,dataType:null},setup(u){const V=u,h=ee("bus"),k=C(!1),v=C(!1),w=C(),d=()=>{v.value=!0,k.value=!1,E.get(`/xero/invoice/${V.invoiceId}`).then(a=>{a.data.data&&a.data.data[0]?w.value=a.data.data[0]:k.value=a.data.error,v.value=!1})},Q=()=>{te("This will repush this to invoice to Xero").onOk(()=>{E.post("/xeroqueue/requeue",{type:V.type,type_id:V.type_id,data:V.dataType?{type:V.dataType}:null}).then(()=>{ue("positive","Xero invoice push queued")}).catch(a=>{L(a)})})},$=a=>{h.emit("xeroInvoiceView",a)};return K(()=>{d()}),(a,I)=>(i(),_("div",qt,[e(Vt),l("div",wt,[Qt,l("div",Tt,[v.value?(i(),_("div",Ct,[e(pe),g(" Loading Xero invoice... ")])):p("",!0),!v.value&&w.value?(i(),_("div",It,[l("div",Ot,[g("Xero Invoice ID:"),Pt,g(n(u.invoiceId),1)]),l("a",{class:"link",onClick:I[0]||(I[0]=N=>$(u.invoiceId))},"#"+n(w.value.invoiceNumber),1),k.value?p("",!0):(i(),_("div",Ut,[e(le,{status:w.value.status},null,8,["status"]),e(P,{onClick:I[1]||(I[1]=N=>Q()),label:"Re-push to Xero",color:"grey",class:"q-ml-xs",flat:""})])),k.value?(i(),_("div",St,[g(" Error retrieving invoice: "),l("div",null,n(k.value),1)])):p("",!0)])):p("",!0)])])]))}}),Nt={key:0,class:"row q-col-gutter-md q-mb-lg"},Bt={class:"col-xs-12 col-sm-4"},At=l("div",{class:"text-h6"},"Total Amount",-1),Et={class:"text-center q-mt-sm"},Lt={class:"col-xs-12 col-sm-4"},Mt=l("div",{class:"text-h6"},"Total Owing",-1),Ft={class:"text-center q-mt-sm"},Xt={key:0,class:"col-xs-12 col-sm-4"},Rt=l("div",{class:"text-h6"},"Commission Paid",-1),Jt={class:"text-center q-mt-sm"},jt={class:"row q-col-gutter-md q-mb-md"},zt={key:0,class:"row q-col-gutter-md"},Gt={class:"col-xs-12 col-sm-8"},Kt={class:"row q-col-gutter-md q-mb-md"},Wt={key:0},Ht=l("div",{class:"text-bold text-grey q-mt-md"},"Deliver To",-1),Yt={key:1},Zt={key:2},el=l("div",{class:"text-bold text-grey q-mt-md"},"Products",-1),tl={key:3,class:"q-mt-lg q-mb-md"},ll={class:"col-xs-12 col-sm-4"},ol=l("div",{class:"text-bold text-grey q-mb-xs"},"Agreed Pickup Time",-1),sl=l("p",null,"The time below has been agreed upon by the customer and contractor.",-1),al={class:"row q-col-gutter-md"},dl={class:"row q-col-gutter-md"},il={key:0},nl={key:1,class:"q-mt-xl"},ul={key:0},rl={key:1},cl={class:"text-grey-7 text-caption"},ml={key:0},_l={key:0,class:"q-ml-xs q-mr-xs"},Jl=G({__name:"OrderEdit",props:{model:null,noNotes:{type:Boolean},futureRecurring:null},emits:["update:order"],setup(u,{emit:V}){const h=u,k=ee("bus"),v=Je(),w=C(),d=z(()=>h.model),Q={team_id:{required:X},scheduled_pickup_date:{required:X},scheduled_pickup_time:{required:X},status:{required:X},productcategories:{required:X}},$=C(!1),a=C(!1),I=ke(Q,d,{$scope:!1}),N=()=>{$.value=!0,E.put(`/order/${h.model.id}`,d.value).then(()=>{ue("positive","Saved"),V("update:order"),k.emit("getDashboardStats"),$.value=!1}).catch(f=>{$.value=!1,L(f)})},W=()=>{V("update:order",{onlyTotals:!0})},B=z(()=>{const f=parseFloat(h.model.grand_total_price.toString()),r=h.model.payments.reduce((M,o)=>M+o.total,0);return{owing:f-r,totalPayments:r}}),H=()=>{a.value=!0,document.location=`/api/orderpayment/session/${h.model.id}`},Y=()=>{te(`This will push the ${v.t("order.name")} to Xero`).onOk(()=>{E.get(`/order/pushtoxero/${h.model.id}`).then(()=>{V("update:order")}).catch(f=>{L(f)})})};return K(async()=>{w.value=await Re()}),(f,r)=>{const M=ve("router-link");return i(),_(U,null,[u.model&&u.model.products.length?(i(),_("div",Nt,[l("div",Bt,[e(O,{class:"bg-secondary text-white"},{default:s(()=>[e(A,null,{default:s(()=>[At,l("div",Et,n(t(y)(u.model.grand_total_price)),1)]),_:1})]),_:1})]),l("div",Lt,[e(O,{class:ae(["text-white",{"bg-positive":t(B).owing<=0,"bg-negative":t(B).owing>0}])},{default:s(()=>[e(A,null,{default:s(()=>[Mt,l("div",Ft,n(t(y)(t(B).owing)),1)]),_:1})]),_:1},8,["class"])]),u.model.commission_paid_amount&&u.model.commission_paid_amount_gst?(i(),_("div",Xt,[e(O,{class:"text-white bg-primary"},{default:s(()=>[e(A,null,{default:s(()=>[Rt,l("div",Jt,n(t(y)(u.model.commission_paid_amount))+" / "+n(t(y)(u.model.commission_paid_amount_gst)),1)]),_:1})]),_:1})])):p("",!0)])):p("",!0),e(O,null,{default:s(()=>[e(J,null,{default:s(()=>[e(j,{group:"orderEdit",label:f.$t("order.details"),"header-class":"text-h6","default-opened":!u.model.products||!u.model.products.length||u.model.recurring_order,caption:"Update the booking details"},{default:s(()=>[e(O,null,{default:s(()=>[e(A,null,{default:s(()=>[l("div",jt,[e(we,{modelValue:t(d).team_id,"onUpdate:modelValue":r[0]||(r[0]=o=>t(d).team_id=o),label:f.$t("team.name"),status:"active",class:"col-xs-12 col-sm-8",error:t(I).team_id.$invalid,disabled:!0},null,8,["modelValue","label","error"]),e(Z,{modelValue:t(d).status,"onUpdate:modelValue":r[1]||(r[1]=o=>t(d).status=o),label:f.$t("order.status"),error:t(I).status.$invalid,"map-options":"",options:t(Oe),"emit-value":"",class:"col-xs-12 col-sm-4"},null,8,["modelValue","label","error","options"])]),t(d).team_id?(i(),_("div",zt,[l("div",Gt,[l("div",Kt,[e(Ve,{modelValue:t(d).scheduled_pickup_date,"onUpdate:modelValue":r[2]||(r[2]=o=>t(d).scheduled_pickup_date=o),label:f.$t("order.scheduledPickupDate"),invalid:t(I).scheduled_pickup_date.$invalid,class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","invalid"]),e(Z,{modelValue:t(d).scheduled_pickup_time,"onUpdate:modelValue":r[3]||(r[3]=o=>t(d).scheduled_pickup_time=o),label:f.$t("order.scheduledPickupTime"),invalid:t(I).scheduled_pickup_time,options:t(Pe),"emit-value":"","map-options":"",class:"col-xs-12 col-sm-6"},null,8,["modelValue","label","invalid","options"])]),t(d).recurring_parent_id?p("",!0):(i(),_("div",Wt,[e(fe,{modelValue:t(d).recurring_order,"onUpdate:modelValue":r[4]||(r[4]=o=>t(d).recurring_order=o),label:f.$t("order.recurring")},null,8,["modelValue","label"]),t(d).recurring_order?(i(),x(Z,{key:0,modelValue:t(d).recurring,"onUpdate:modelValue":r[5]||(r[5]=o=>t(d).recurring=o),label:f.$t("order.recurringFrequency"),options:["Week","Fortnite","Month"],"bottom-slots":""},null,8,["modelValue","label"])):p("",!0)])),Ht,t(d).address1?(i(),_("div",Yt,n(t(d).address1),1)):p("",!0),l("div",null,n(t(d).address2),1),t(d).suburbpostcoderegion?(i(),_("div",Zt,n(t(d).suburbpostcoderegion.locality)+" "+n(t(d).suburbpostcoderegion.state)+" "+n(t(d).suburbpostcoderegion.postcode),1)):p("",!0),el,(i(!0),_(U,null,D(t(d).productcategories,o=>(i(),_("div",{key:o.id},[o.meta?(i(),x(be,{key:0,modelValue:o.meta.pivot_active,"onUpdate:modelValue":c=>o.meta.pivot_active=c,label:o.name},null,8,["modelValue","onUpdate:modelValue","label"])):p("",!0)]))),128)),t(d).scheduled_pickup_time?(i(),_("div",tl,[e(Qe,{modelValue:t(d).contractor_user_id,"onUpdate:modelValue":r[6]||(r[6]=o=>t(d).contractor_user_id=o),team_id:t(d).team_id,scheduled_pickup_date:t(d).scheduled_pickup_date,scheduled_pickup_time:t(d).scheduled_pickup_time,reassign:!0,productcategories:u.model.productcategories},null,8,["modelValue","team_id","scheduled_pickup_date","scheduled_pickup_time","productcategories"])])):p("",!0)]),l("div",ll,[ol,sl,e(he,{modelValue:t(d).agreed_pickup_time,"onUpdate:modelValue":r[7]||(r[7]=o=>t(d).agreed_pickup_time=o),color:"secondary"},null,8,["modelValue"])])])):p("",!0)]),_:1}),e(oe,{align:"right"},{default:s(()=>[e(P,{disable:$.value||t(I).$invalid,label:f.$t("actions.update"),color:"primary",onClick:r[8]||(r[8]=o=>N())},null,8,["disable","label"])]),_:1})]),_:1})]),_:1},8,["label","default-opened"]),e(j,{group:"orderEdit",label:`${f.$t("order.products")} (${u.model.products.length})`,caption:" Create, update and delete products for this booking","header-class":"text-h6","default-opened":!!(u.model.products&&u.model.products.length&&!u.model.recurring_order)},{default:s(()=>[e(O,null,{default:s(()=>[e(He,{model:u.model,"onUpdate:products":W},null,8,["model"])]),_:1})]),_:1},8,["label","default-opened"]),e(j,{group:"orderEdit",label:f.$t("order.invoiceConfiguration"),caption:"Invoice configuration","header-class":"text-h6"},{default:s(()=>[e(O,null,{default:s(()=>[e(A,null,{default:s(()=>[l("div",al,[e(R,{modelValue:t(d).invoice_name,"onUpdate:modelValue":r[9]||(r[9]=o=>t(d).invoice_name=o),label:f.$t("team.invoiceName"),class:"col-xs-12 col-sm-6","bottom-slots":""},null,8,["modelValue","label"]),e(R,{modelValue:t(d).invoice_po,"onUpdate:modelValue":r[10]||(r[10]=o=>t(d).invoice_po=o),label:f.$t("team.invoicePo"),class:"col-xs-12 col-sm-6","bottom-slots":""},null,8,["modelValue","label"])]),e($e,{model:t(d),addressfields:{address1:"invoice_address1",address2:"invoice_address2",suburb_postcode_region_id:"invoice_address_suburb_postcode_region_id",lat:"lat",lng:"lng",country_id:"invoice_address_country_id"},placeholder:f.$t("address.search"),filled:!0},null,8,["model","placeholder"]),e(R,{modelValue:t(d).invoice_address1,"onUpdate:modelValue":r[11]||(r[11]=o=>t(d).invoice_address1=o),label:f.$t("address.line1"),"bottom-slots":""},null,8,["modelValue","label"]),e(R,{modelValue:t(d).invoice_address2,"onUpdate:modelValue":r[12]||(r[12]=o=>t(d).invoice_address2=o),label:f.$t("address.line2"),"bottom-slots":""},null,8,["modelValue","label"]),l("div",dl,[e(qe,{modelValue:t(d).invoice_address_suburb_postcode_region_id,"onUpdate:modelValue":r[13]||(r[13]=o=>t(d).invoice_address_suburb_postcode_region_id=o),label:f.$t("address.suburb"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"]),e(xe,{modelValue:t(d).invoice_address_country_id,"onUpdate:modelValue":r[14]||(r[14]=o=>t(d).invoice_address_country_id=o),label:f.$t("address.country"),class:"col-xs-12 col-sm-6"},null,8,["modelValue","label"])])]),_:1}),e(oe,{align:"right"},{default:s(()=>[e(P,{disable:$.value||t(I).$invalid,label:f.$t("actions.update"),color:"primary",onClick:r[15]||(r[15]=o=>N())},null,8,["disable","label"])]),_:1})]),_:1})]),_:1},8,["label"]),u.model&&u.model.products.length?(i(),x(j,{key:0,group:"orderEdit",label:f.$t("order.payments"),caption:"Payments","header-class":"text-h6"},{default:s(()=>[e(O,null,{default:s(()=>[e(A,null,{default:s(()=>[e(J,{separator:""},{default:s(()=>[u.model.payments.length?p("",!0):(i(),x(S,{key:0},{default:s(()=>[e(q,null,{default:s(()=>[g(" No payments found ")]),_:1})]),_:1})),(i(!0),_(U,null,D(u.model.payments,o=>(i(),x(S,{key:o.id},{default:s(()=>[e(q,{avatar:""},{default:s(()=>[e(Be,{user:o.user},null,8,["user"])]),_:2},1024),e(q,null,{default:s(()=>[l("div",null,n(t(Ue)(o.created_at)),1)]),_:2},1024),e(q,{side:""},{default:s(()=>[g(n(t(y)(o.grand_total)),1)]),_:2},1024)]),_:2},1024))),128)),t(B).owing>0?(i(),x(S,{key:1},{default:s(()=>[e(q,null,{default:s(()=>[e(P,{onClick:r[16]||(r[16]=o=>H()),label:"Make Payment",color:"primary",push:"",disable:a.value,loading:a.value},null,8,["disable","loading"])]),_:1})]),_:1})):p("",!0),u.model.status==="paid"&&!u.model.xero_id?(i(),x(S,{key:2},{default:s(()=>[e(q,null,{default:s(()=>[e(P,{onClick:r[17]||(r[17]=o=>Y()),label:"Push to Xero",color:"blue",push:""})]),_:1})]),_:1})):p("",!0)]),_:1}),u.model.xero_id?(i(),_("div",il,[e(ge,{class:"q-mt-md"}),e(Dt,{"invoice-id":u.model.xero_id,type:"Order",type_id:u.model.id},null,8,["invoice-id","type_id"])])):p("",!0)]),_:1})]),_:1})]),_:1},8,["label"])):p("",!0)]),_:1})]),_:1}),u.noNotes?p("",!0):(i(),_("div",nl,[e(Te,{notable_id:u.model.id,notable_type:"Order",nobox:!0},null,8,["notable_id"])])),u.futureRecurring&&u.futureRecurring.length?(i(),x(O,{key:2,class:"q-mb-md"},{default:s(()=>[e(J,{separator:""},{default:s(()=>[e(ye,{header:""},{default:s(()=>[g("FUTURE BOOKINGS")]),_:1}),(i(!0),_(U,null,D(u.futureRecurring,o=>(i(),x(S,{key:o.id},{default:s(()=>[l("div",null,[l("div",null,[e(M,{to:{name:"order-edit",params:{id:o.id}},target:"_blank",class:"link"},{default:s(()=>[g(n(t(Se)(o.scheduled_pickup_date))+" "+n(o.scheduled_pickup_date)+" (",1),o.agreed_pickup_time?p("",!0):(i(),_("span",ul,n(t(De)(o.scheduled_pickup_time)),1)),o.agreed_pickup_time?(i(),_("span",rl,n(t(Ne)(o.agreed_pickup_time)),1)):p("",!0),g(")")]),_:2},1032,["to"]),e(le,{status:o.status,small:!0,class:"q-ml-xs"},null,8,["status"])]),l("div",cl,[e(de,{name:"settings",color:"grey-7"}),g(),o.productcategories?(i(),_("span",ml,[(i(!0),_(U,null,D(o.productcategories,(c,b)=>(i(),_("span",{key:c.id},[g(n(c.name),1),b+1!==o.productcategories.length?(i(),_("span",_l,"&")):p("",!0)]))),128)),g(" pickup with "+n(o.team.name),1)])):p("",!0)])])]),_:2},1024))),128))]),_:1})]),_:1})):p("",!0)],64)}}});export{Jl as default};
